import{s as Ve,e as h,t as Q,k as j,c as g,a as b,b as $,d as f,o as P,G as Ue,f as d,i as q,g as c,C as ie,u as R,h as ee,n as Ae,I as pe,p as Me,j as he,q as $e,z as ge,V as et,B as Be,D as De,W as lt,U as rt,T as Ye}from"../chunks/Bpbbr8c4.js";import{S as Te,i as xe,t as L,g as tt,c as st,a as X,b as te,d as se,m as le,e as re,f as He}from"../chunks/DqnutP3R.js";import{e as Ie}from"../chunks/DXFNvcTQ.js";import{t as at}from"../chunks/CwHEXZG1.js";import{g as nt}from"../chunks/xzuQ-u72.js";import{c as ot,b as it,u as ut,m as ct,g as ft}from"../chunks/D6Dxu525.js";import{c as dt}from"../chunks/BI-ISvyW.js";import{h as ht}from"../chunks/B0cj2Y9n.js";import{aF as gt}from"../chunks/DkFF7Gkj.js";import{C as _t}from"../chunks/C2opaZFL.js";import{P as mt}from"../chunks/CST7eXNK.js";import{C as pt}from"../chunks/CXKiGu0c.js";import{S as vt,A as bt}from"../chunks/DpaMvHXP.js";function kt(l){let e,t,s,r=l[4].t(l[0].role)+"",u,n,o,a,_,I,p,i,V,E='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>',x,k;return{c(){e=h("div"),t=h("div"),s=h("div"),u=Q(r),n=j(),o=h("div"),a=h("textarea"),p=j(),i=h("div"),V=h("button"),V.innerHTML=E,this.h()},l(m){e=g(m,"DIV",{class:!0});var w=b(e);t=g(w,"DIV",{class:!0});var N=b(t);s=g(N,"DIV",{class:!0});var B=b(s);u=$(B,r),B.forEach(f),N.forEach(f),n=P(w),o=g(w,"DIV",{class:!0});var T=b(o);a=g(T,"TEXTAREA",{id:!0,class:!0,placeholder:!0,rows:!0}),b(a).forEach(f),T.forEach(f),p=P(w),i=g(w,"DIV",{class:!0});var D=b(i);V=g(D,"BUTTON",{class:!0,"data-svelte-h":!0}),Ue(V)!=="svelte-7qrvne"&&(V.innerHTML=E),D.forEach(f),w.forEach(f),this.h()},h(){d(s,"class","px-2 py-1 text-sm font-semibold uppercase min-w-[6rem] text-left rounded-lg transition"),d(t,"class","flex items-start pt-1"),d(a,"id",_=l[0].role+"-"+l[1]+"-textarea"),d(a,"class","w-full bg-transparent outline-hidden rounded-lg p-2 text-sm resize-none overflow-hidden"),d(a,"placeholder",I=l[4].t("Enter {{role}} message here",{role:l[0].role==="user"?l[4].t("a user"):l[4].t("an assistant")})),d(a,"rows","1"),d(o,"class","flex-1"),d(V,"class","group-hover:text-gray-500 dark:text-gray-900 dark:hover:text-gray-300 transition"),d(i,"class","pt-1"),d(e,"class","flex gap-2 group")},m(m,w){q(m,e,w),c(e,t),c(t,s),c(s,u),c(e,n),c(e,o),c(o,a),l[6](a),ie(a,l[0].content),c(e,p),c(e,i),c(i,V),x||(k=[R(a,"input",l[7]),R(a,"focus",l[8]),R(a,"input",l[9]),R(V,"click",l[10])],x=!0)},p(m,[w]){w&17&&r!==(r=m[4].t(m[0].role)+"")&&ee(u,r),w&3&&_!==(_=m[0].role+"-"+m[1]+"-textarea")&&d(a,"id",_),w&17&&I!==(I=m[4].t("Enter {{role}} message here",{role:m[0].role==="user"?m[4].t("a user"):m[4].t("an assistant")}))&&d(a,"placeholder",I),w&1&&ie(a,m[0].content)},i:Ae,o:Ae,d(m){m&&f(e),l[6](null),x=!1,pe(k)}}}function wt(l,e,t){let s;const r=Me("i18n");he(l,r,E=>t(4,s=E));let{message:u}=e,{idx:n}=e,{onDelete:o}=e,a;$e(()=>{t(3,a.style.height="",a),t(3,a.style.height=a.scrollHeight+"px",a)});function _(E){ge[E?"unshift":"push"](()=>{a=E,t(3,a)})}const I=E=>{t(3,a.style.height="",a),t(3,a.style.height=a.scrollHeight+"px",a)},p=E=>{t(3,a.style.height="",a),t(3,a.style.height=a.scrollHeight+"px",a)};function i(){u.content=this.value,t(0,u)}const V=()=>{o()};return l.$$set=E=>{"message"in E&&t(0,u=E.message),"idx"in E&&t(1,n=E.idx),"onDelete"in E&&t(2,o=E.onDelete)},[u,n,o,a,s,r,_,I,p,i,V]}class yt extends Te{constructor(e){super(),xe(this,e,wt,kt,Ve,{message:0,idx:1,onDelete:2})}}function Ge(l,e,t){const s=l.slice();return s[3]=e[t],s[5]=t,s}function Je(l){let e,t;function s(){return l[1](l[5])}return e=new yt({props:{message:l[3],idx:l[5],onDelete:s}}),{c(){te(e.$$.fragment)},l(r){se(e.$$.fragment,r)},m(r,u){le(e,r,u),t=!0},p(r,u){l=r;const n={};u&1&&(n.message=l[3]),u&1&&(n.onDelete=s),e.$set(n)},i(r){t||(L(e.$$.fragment,r),t=!0)},o(r){X(e.$$.fragment,r),t=!1},d(r){re(e,r)}}}function Et(l){let e,t,s=Ie(l[0]),r=[];for(let n=0;n<s.length;n+=1)r[n]=Je(Ge(l,s,n));const u=n=>X(r[n],1,1,()=>{r[n]=null});return{c(){e=h("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=g(n,"DIV",{class:!0});var o=b(e);for(let a=0;a<r.length;a+=1)r[a].l(o);o.forEach(f),this.h()},h(){d(e,"class","py-3 space-y-3")},m(n,o){q(n,e,o);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);t=!0},p(n,[o]){if(o&1){s=Ie(n[0]);let a;for(a=0;a<s.length;a+=1){const _=Ge(n,s,a);r[a]?(r[a].p(_,o),L(r[a],1)):(r[a]=Je(_),r[a].c(),L(r[a],1),r[a].m(e,null))}for(tt(),a=s.length;a<r.length;a+=1)u(a);st()}},i(n){if(!t){for(let o=0;o<s.length;o+=1)L(r[o]);t=!0}},o(n){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)X(r[o]);t=!1},d(n){n&&f(e),et(r,n)}}}function Dt(l,e,t){Me("i18n");let{messages:s=[]}=e;const r=u=>{t(0,s=s.filter((n,o)=>o!==u))};return l.$$set=u=>{"messages"in u&&t(0,s=u.messages)},[s,r]}class It extends Te{constructor(e){super(),xe(this,e,Dt,Et,Ve,{messages:0})}}function Ze(l,e,t){const s=l.slice();return s[41]=e[t],s}function Ke(l){let e,t=l[41].name+"",s,r;return{c(){e=h("option"),s=Q(t),this.h()},l(u){e=g(u,"OPTION",{class:!0});var n=b(e);s=$(n,t),n.forEach(f),this.h()},h(){e.__value=r=l[41].id,ie(e,e.__value),d(e,"class","bg-gray-50 dark:bg-gray-700")},m(u,n){q(u,e,n),c(e,s)},p(u,n){n[0]&1024&&t!==(t=u[41].name+"")&&ee(s,t),n[0]&1024&&r!==(r=u[41].id)&&(e.__value=r,ie(e,e.__value))},d(u){u&&f(e)}}}function Vt(l){let e,t,s,r="Settings",u,n,o,a,_,I,p,i,V="Model",E,x,k,m,w,N;a=new bt({props:{className:"size-3",strokeWidth:"2.5"}});let B=Ie(l[10]),T=[];for(let D=0;D<B.length;D+=1)T[D]=Ke(Ze(l,B,D));return{c(){e=h("div"),t=h("div"),s=h("div"),s.textContent=r,u=j(),n=h("div"),o=h("button"),te(a.$$.fragment),_=j(),I=h("div"),p=h("div"),i=h("div"),i.textContent=V,E=j(),x=h("div"),k=h("select");for(let D=0;D<T.length;D+=1)T[D].c();this.h()},l(D){e=g(D,"DIV",{class:!0});var U=b(e);t=g(U,"DIV",{class:!0});var C=b(t);s=g(C,"DIV",{class:!0,"data-svelte-h":!0}),Ue(s)!=="svelte-1dw76ku"&&(s.textContent=r),u=P(C),n=g(C,"DIV",{class:!0});var A=b(n);o=g(A,"BUTTON",{class:!0});var Y=b(o);se(a.$$.fragment,Y),Y.forEach(f),A.forEach(f),C.forEach(f),_=P(U),I=g(U,"DIV",{class:!0});var H=b(I);p=g(H,"DIV",{});var G=b(p);i=g(G,"DIV",{class:!0,"data-svelte-h":!0}),Ue(i)!=="svelte-vz1bvh"&&(i.textContent=V),E=P(G),x=g(G,"DIV",{class:!0});var ae=b(x);k=g(ae,"SELECT",{class:!0});var W=b(k);for(let J=0;J<T.length;J+=1)T[J].l(W);W.forEach(f),ae.forEach(f),G.forEach(f),H.forEach(f),U.forEach(f),this.h()},h(){d(s,"class","font-medium text-base"),d(o,"class","p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg"),d(n,"class","translate-x-1.5"),d(t,"class","flex justify-between items-center mb-2"),d(i,"class","text-xs font-medium mb-1"),d(k,"class","w-full bg-transparent border border-gray-100 dark:border-gray-850 rounded-lg py-1 px-2 -mx-0.5 text-sm outline-hidden"),l[1]===void 0&&rt(()=>l[18].call(k)),d(x,"class","w-full"),d(I,"class","mt-1"),d(e,"class","flex flex-col px-5 py-3 text-sm")},m(D,U){q(D,e,U),c(e,t),c(t,s),c(t,u),c(t,n),c(n,o),le(a,o,null),c(e,_),c(e,I),c(I,p),c(p,i),c(p,E),c(p,x),c(x,k);for(let C=0;C<T.length;C+=1)T[C]&&T[C].m(k,null);Ye(k,l[1],!0),m=!0,w||(N=[R(o,"click",l[17]),R(k,"change",l[18])],w=!0)},p(D,U){if(U[0]&1024){B=Ie(D[10]);let C;for(C=0;C<B.length;C+=1){const A=Ze(D,B,C);T[C]?T[C].p(A,U):(T[C]=Ke(A),T[C].c(),T[C].m(k,null))}for(;C<T.length;C+=1)T[C].d(1);T.length=B.length}U[0]&1026&&Ye(k,D[1])},i(D){m||(L(a.$$.fragment,D),m=!0)},o(D){X(a.$$.fragment,D),m=!1},d(D){D&&f(e),re(a),et(T,D),w=!1,pe(N)}}}function Qe(l){let e,t;return{c(){e=h("div"),t=Q(l[6]),this.h()},l(s){e=g(s,"DIV",{class:!0});var r=b(e);t=$(r,l[6]),r.forEach(f),this.h()},h(){d(e,"class","flex-1 text-gray-500 line-clamp-1")},m(s,r){q(s,e,r),c(e,t)},p(s,r){r[0]&64&&ee(t,s[6])},d(s){s&&f(e)}}}function Tt(l){let e,t;return e=new mt({props:{className:"size-3.5"}}),{c(){te(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,r){le(e,s,r),t=!0},i(s){t||(L(e.$$.fragment,s),t=!0)},o(s){X(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function xt(l){let e,t;return e=new _t({props:{className:"size-3.5"}}),{c(){te(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,r){le(e,s,r),t=!0},i(s){t||(L(e.$$.fragment,s),t=!0)},o(s){X(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}function Ct(l){let e,t,s=l[11].t("System Instructions")+"",r,u,n,o,a,_,I,p,i=!l[0]&&Qe(l);const V=[xt,Tt],E=[];function x(k,m){return k[0]?0:1}return _=x(l),I=E[_]=V[_](l),{c(){e=h("div"),t=h("div"),r=Q(s),u=j(),i&&i.c(),n=j(),o=h("div"),a=h("button"),I.c(),this.h()},l(k){e=g(k,"DIV",{class:!0});var m=b(e);t=g(m,"DIV",{class:!0});var w=b(t);r=$(w,s),w.forEach(f),u=P(m),i&&i.l(m),n=P(m),o=g(m,"DIV",{class:!0});var N=b(o);a=g(N,"BUTTON",{class:!0});var B=b(a);I.l(B),B.forEach(f),N.forEach(f),m.forEach(f),this.h()},h(){d(t,"class","shrink-0 font-medium ml-1.5"),d(a,"class","p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg"),d(o,"class","shrink-0"),d(e,"class","flex gap-2 justify-between items-center")},m(k,m){q(k,e,m),c(e,t),c(t,r),c(e,u),i&&i.m(e,null),c(e,n),c(e,o),c(o,a),E[_].m(a,null),p=!0},p(k,m){(!p||m[0]&2048)&&s!==(s=k[11].t("System Instructions")+"")&&ee(r,s),k[0]?i&&(i.d(1),i=null):i?i.p(k,m):(i=Qe(k),i.c(),i.m(e,n));let w=_;_=x(k),_!==w&&(tt(),X(E[w],1,1,()=>{E[w]=null}),st(),I=E[_],I||(I=E[_]=V[_](k),I.c()),L(I,1),I.m(a,null))},i(k){p||(L(I),p=!0)},o(k){X(I),p=!1},d(k){k&&f(e),i&&i.d(),E[_].d()}}}function Nt(l){let e,t,s,r,u,n;return{c(){e=h("div"),t=h("div"),s=h("textarea"),this.h()},l(o){e=g(o,"DIV",{slot:!0});var a=b(e);t=g(a,"DIV",{class:!0});var _=b(t);s=g(_,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),b(s).forEach(f),_.forEach(f),a.forEach(f),this.h()},h(){d(s,"class","w-full h-full bg-transparent resize-none outline-hidden text-sm"),d(s,"placeholder",r=l[11].t("You're a helpful assistant.")),d(s,"rows","4"),d(t,"class","pt-1 px-1.5"),d(e,"slot","content")},m(o,a){q(o,e,a),c(e,t),c(t,s),l[20](s),ie(s,l[6]),u||(n=[R(s,"input",l[21]),R(s,"input",l[22])],u=!0)},p(o,a){a[0]&2048&&r!==(r=o[11].t("You're a helpful assistant."))&&d(s,"placeholder",r),a[0]&64&&ie(s,o[6])},d(o){o&&f(e),l[20](null),u=!1,pe(n)}}}function St(l){let e=l[11].t("Assistant")+"",t;return{c(){t=Q(e)},l(s){t=$(s,e)},m(s,r){q(s,t,r)},p(s,r){r[0]&2048&&e!==(e=s[11].t("Assistant")+"")&&ee(t,e)},d(s){s&&f(t)}}}function Bt(l){let e=l[11].t("User")+"",t;return{c(){t=Q(e)},l(s){t=$(s,e)},m(s,r){q(s,t,r)},p(s,r){r[0]&2048&&e!==(e=s[11].t("User")+"")&&ee(t,e)},d(s){s&&f(t)}}}function Ht(l){let e,t=l[11].t("Cancel")+"",s,r,u;return{c(){e=h("button"),s=Q(t),this.h()},l(n){e=g(n,"BUTTON",{class:!0});var o=b(e);s=$(o,t),o.forEach(f),this.h()},h(){d(e,"class","px-3 py-1.5 text-sm font-medium bg-gray-300 text-black transition rounded-lg")},m(n,o){q(n,e,o),c(e,s),r||(u=R(e,"click",l[33]),r=!0)},p(n,o){o[0]&2048&&t!==(t=n[11].t("Cancel")+"")&&ee(s,t)},d(n){n&&f(e),r=!1,u()}}}function Ut(l){let e,t=l[11].t("Add")+"",s,r,u,n,o=l[11].t("Run")+"",a,_,I;return{c(){e=h("button"),s=Q(t),u=j(),n=h("button"),a=Q(o),this.h()},l(p){e=g(p,"BUTTON",{class:!0});var i=b(e);s=$(i,t),i.forEach(f),u=P(p),n=g(p,"BUTTON",{class:!0});var V=b(n);a=$(V,o),V.forEach(f),this.h()},h(){e.disabled=r=l[8]==="",d(e,"class","px-3.5 py-1.5 text-sm font-medium disabled:bg-gray-50 dark:disabled:hover:bg-gray-850 disabled:cursor-not-allowed bg-gray-50 hover:bg-gray-100 text-gray-900 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition rounded-lg"),d(n,"class","px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-lg")},m(p,i){q(p,e,i),c(e,s),q(p,u,i),q(p,n,i),c(n,a),_||(I=[R(e,"click",l[31]),R(n,"click",l[32])],_=!0)},p(p,i){i[0]&2048&&t!==(t=p[11].t("Add")+"")&&ee(s,t),i[0]&256&&r!==(r=p[8]==="")&&(e.disabled=r),i[0]&2048&&o!==(o=p[11].t("Run")+"")&&ee(a,o)},d(p){p&&(f(e),f(u),f(n)),_=!1,pe(I)}}}function At(l){let e,t,s,r,u,n,o,a,_,I,p,i,V,E,x,k,m,w,N,B,T,D,U,C,A,Y,H,G,ae,W,J,K,_e,ne,oe,me,ve;function Ce(v){l[19](v)}let be={className:" bg-white dark:bg-gray-900",width:"300px",$$slots:{default:[Vt]},$$scope:{ctx:l}};l[5]!==void 0&&(be.show=l[5]),s=new vt({props:be}),ge.push(()=>He(s,"show",Ce));function Ne(v){l[23](v)}let ke={className:"w-full flex-1",buttonClassName:"w-full rounded-lg text-sm border border-gray-100 dark:border-gray-850 w-full py-1 px-1.5",grow:!0,$$slots:{content:[Nt],default:[Ct]},$$scope:{ctx:l}};l[0]!==void 0&&(ke.open=l[0]),a=new gt({props:ke}),ge.push(()=>He(a,"open",Ne)),V=new pt({});function Se(v){l[25](v)}let y={};l[9]!==void 0&&(y.messages=l[9]),w=new It({props:y}),ge.push(()=>He(w,"messages",Se));function fe(v,S){return v[7]==="user"?Bt:St}let de=fe(l),M=de(l);function ue(v,S){return v[2]?Ht:Ut}let ce=ue(l),O=ce(l);return{c(){e=h("div"),t=h("div"),te(s.$$.fragment),u=j(),n=h("div"),o=h("div"),te(a.$$.fragment),I=j(),p=h("div"),i=h("button"),te(V.$$.fragment),E=j(),x=h("div"),k=h("div"),m=h("div"),te(w.$$.fragment),B=j(),T=h("div"),D=h("div"),U=Q(l[1]),C=j(),A=h("div"),Y=h("div"),H=h("textarea"),ae=j(),W=h("div"),J=h("div"),K=h("button"),M.c(),_e=j(),ne=h("div"),O.c(),this.h()},l(v){e=g(v,"DIV",{class:!0});var S=b(e);t=g(S,"DIV",{class:!0});var F=b(t);se(s.$$.fragment,F),u=P(F),n=g(F,"DIV",{class:!0});var z=b(n);o=g(z,"DIV",{class:!0});var Z=b(o);se(a.$$.fragment,Z),I=P(Z),p=g(Z,"DIV",{class:!0});var Oe=b(p);i=g(Oe,"BUTTON",{class:!0});var Re=b(i);se(V.$$.fragment,Re),Re.forEach(f),Oe.forEach(f),Z.forEach(f),E=P(z),x=g(z,"DIV",{class:!0,id:!0});var ze=b(x);k=g(ze,"DIV",{class:!0});var je=b(k);m=g(je,"DIV",{class:!0});var Pe=b(m);se(w.$$.fragment,Pe),Pe.forEach(f),je.forEach(f),ze.forEach(f),B=P(z),T=g(z,"DIV",{class:!0});var we=b(T);D=g(we,"DIV",{class:!0});var Le=b(D);U=$(Le,l[1]),Le.forEach(f),C=P(we),A=g(we,"DIV",{class:!0});var ye=b(A);Y=g(ye,"DIV",{class:!0});var qe=b(Y);H=g(qe,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),b(H).forEach(f),qe.forEach(f),ae=P(ye),W=g(ye,"DIV",{class:!0});var Ee=b(W);J=g(Ee,"DIV",{});var We=b(J);K=g(We,"BUTTON",{class:!0});var Xe=b(K);M.l(Xe),Xe.forEach(f),We.forEach(f),_e=P(Ee),ne=g(Ee,"DIV",{});var Fe=b(ne);O.l(Fe),Fe.forEach(f),Ee.forEach(f),ye.forEach(f),we.forEach(f),z.forEach(f),F.forEach(f),S.forEach(f),this.h()},h(){d(i,"class","p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg"),d(p,"class","translate-y-1"),d(o,"class","flex w-full items-start gap-1.5"),d(m,"class","flex-1 p-1"),d(k,"class","h-full w-full flex flex-col"),d(x,"class","pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0"),d(x,"id","messages-container"),d(D,"class","text-xs font-medium text-gray-500 px-2 py-1"),d(H,"class","w-full h-full bg-transparent resize-none outline-hidden text-sm"),d(H,"placeholder",G=l[11].t("Enter {{role}} message here",{role:l[7]==="user"?l[11].t("a user"):l[11].t("an assistant")})),d(H,"rows","2"),d(Y,"class","py-0.5"),d(K,"class","px-3.5 py-1.5 text-sm font-medium bg-gray-50 hover:bg-gray-100 text-gray-900 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition rounded-lg"),d(W,"class","flex justify-between"),d(A,"class","border border-gray-100 dark:border-gray-850 w-full px-3 py-2.5 rounded-xl"),d(T,"class","pb-3"),d(n,"class","flex flex-col h-full px-3.5"),d(t,"class","mx-auto w-full md:px-0 h-full relative"),d(e,"class","flex flex-col justify-between w-full overflow-y-auto h-full")},m(v,S){q(v,e,S),c(e,t),le(s,t,null),c(t,u),c(t,n),c(n,o),le(a,o,null),c(o,I),c(o,p),c(p,i),le(V,i,null),c(n,E),c(n,x),c(x,k),c(k,m),le(w,m,null),l[26](x),c(n,B),c(n,T),c(T,D),c(D,U),c(T,C),c(T,A),c(A,Y),c(Y,H),ie(H,l[8]),c(A,ae),c(A,W),c(W,J),c(J,K),M.m(K,null),c(W,_e),c(W,ne),O.m(ne,null),oe=!0,me||(ve=[R(i,"click",l[24]),R(H,"input",l[27]),R(H,"input",l[28]),R(H,"focus",l[29]),R(K,"click",l[30])],me=!0)},p(v,S){const F={};S[0]&1058|S[1]&8192&&(F.$$scope={dirty:S,ctx:v}),!r&&S[0]&32&&(r=!0,F.show=v[5],Be(()=>r=!1)),s.$set(F);const z={};S[0]&2121|S[1]&8192&&(z.$$scope={dirty:S,ctx:v}),!_&&S[0]&1&&(_=!0,z.open=v[0],Be(()=>_=!1)),a.$set(z);const Z={};!N&&S[0]&512&&(N=!0,Z.messages=v[9],Be(()=>N=!1)),w.$set(Z),(!oe||S[0]&2)&&ee(U,v[1]),(!oe||S[0]&2176&&G!==(G=v[11].t("Enter {{role}} message here",{role:v[7]==="user"?v[11].t("a user"):v[11].t("an assistant")})))&&d(H,"placeholder",G),S[0]&256&&ie(H,v[8]),de===(de=fe(v))&&M?M.p(v,S):(M.d(1),M=de(v),M&&(M.c(),M.m(K,null))),ce===(ce=ue(v))&&O?O.p(v,S):(O.d(1),O=ce(v),O&&(O.c(),O.m(ne,null)))},i(v){oe||(L(s.$$.fragment,v),L(a.$$.fragment,v),L(V.$$.fragment,v),L(w.$$.fragment,v),oe=!0)},o(v){X(s.$$.fragment,v),X(a.$$.fragment,v),X(V.$$.fragment,v),X(w.$$.fragment,v),oe=!1},d(v){v&&f(e),re(s),re(a),re(V),re(w),l[26](null),M.d(),O.d(),me=!1,pe(ve)}}}function Mt(l,e,t){let s,r,u,n,o;he(l,ot,y=>t(36,s=y)),he(l,it,y=>t(37,r=y)),he(l,ut,y=>t(38,u=y)),he(l,ct,y=>t(10,n=y));const a=Me("i18n");he(l,a,y=>t(11,o=y));let _="",I=!1,p=!1,i,V,E=!1,x=!1,k="",m="user",w="",N=[];const B=()=>{const y=V;y&&(y.scrollTop=y==null?void 0:y.scrollHeight)},T=()=>{p=!0,console.log("stopResponse")},D=async()=>{await De(),i&&(t(3,i.style.height="",i),t(3,i.style.height=Math.min(i.scrollHeight,555)+"px",i))},U=async()=>{var ce;if(_===""){at.error(o.t("Please select a model."));return}const y=n.find(O=>O.id===_);if(!y){t(1,_="");return}const[fe,de]=await dt(localStorage.token,{model:y.id,stream:!0,messages:[k?{role:"system",content:k}:void 0,...N].filter(O=>O)},`${ft}/api`);let M;((ce=N.at(-1))==null?void 0:ce.role)==="assistant"?M=N.at(-1):(M={role:"assistant",content:""},N.push(M),t(9,N)),await De();const ue=document.getElementById(`assistant-${N.length-1}-textarea`);if(fe&&fe.ok){const O=fe.body.pipeThrough(new TextDecoderStream).pipeThrough(ht(`
`)).getReader();for(;;){const{value:v,done:S}=await O.read();if(S||p){p&&de.abort("User: Stop Response");break}try{let F=v.split(`
`);for(const z of F)if(z!=="")if(console.log(z),z==="data: [DONE]")t(9,N);else{let Z=JSON.parse(z.replace(/^data: /,""));if(console.log(Z),M.content==""&&Z.choices[0].delta.content==`
`)continue;ue.style.height=ue.scrollHeight+"px",M.content+=Z.choices[0].delta.content??"",t(9,N),ue.style.height=ue.scrollHeight+"px",await De()}}catch(F){console.log(F)}B()}}},C=async()=>{w&&(N.push({role:m,content:w}),t(9,N),t(8,w=""),await De(),B())},A=async()=>{_&&(await C(),t(2,I=!0),await U(),t(2,I=!1),p=!1)};$e(async()=>{(u==null?void 0:u.role)!=="admin"&&await nt("/"),r!=null&&r.models?t(1,_=r==null?void 0:r.models[0]):s!=null&&s.default_models?t(1,_=s==null?void 0:s.default_models.split(",")[0]):t(1,_="")});const Y=()=>{t(5,x=!x)};function H(){_=lt(this),t(1,_)}function G(y){x=y,t(5,x)}function ae(y){ge[y?"unshift":"push"](()=>{i=y,t(3,i)})}function W(){k=this.value,t(6,k)}const J=()=>{D()};function K(y){E=y,t(0,E)}const _e=()=>{t(5,x=!x)};function ne(y){N=y,t(9,N)}function oe(y){ge[y?"unshift":"push"](()=>{V=y,t(4,V)})}function me(){w=this.value,t(8,w)}const ve=y=>{y.target.style.height="",y.target.style.height=Math.min(y.target.scrollHeight,150)+"px"},Ce=y=>{y.target.style.height="",y.target.style.height=Math.min(y.target.scrollHeight,150)+"px"},be=()=>{t(7,m=m==="user"?"assistant":"user")},Ne=()=>{C(),t(7,m=m==="user"?"assistant":"user")},ke=()=>{A()},Se=()=>{T()};return l.$$.update=()=>{l.$$.dirty[0]&1&&E&&D()},[E,_,I,i,V,x,k,m,w,N,n,o,a,T,D,C,A,Y,H,G,ae,W,J,K,_e,ne,oe,me,ve,Ce,be,Ne,ke,Se]}class Ot extends Te{constructor(e){super(),xe(this,e,Mt,At,Ve,{},null,[-1,-1])}}function Rt(l){let e,t;return e=new Ot({}),{c(){te(e.$$.fragment)},l(s){se(e.$$.fragment,s)},m(s,r){le(e,s,r),t=!0},p:Ae,i(s){t||(L(e.$$.fragment,s),t=!0)},o(s){X(e.$$.fragment,s),t=!1},d(s){re(e,s)}}}class Qt extends Te{constructor(e){super(),xe(this,e,null,Rt,Ve,{})}}export{Qt as component};
//# sourceMappingURL=21.xc1egkMq.js.map
