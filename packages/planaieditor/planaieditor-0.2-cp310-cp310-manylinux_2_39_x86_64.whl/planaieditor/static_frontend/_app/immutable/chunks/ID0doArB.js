import{ai as Ve,_ as Ge,d as Ze,e as he,D as Ie,aj as _,ak as Pe,al as Ye,am as ae,an as ue,ao as xe,ap as Qe,aq as B,ar as me,as as Xe,at as Je,au as ze,ab as je,ad as Te,av as le,aw as g,ax as F,Z as et,ay as G,V as tt,az as nt,aA as rt,aB as it,aC as ot,aD as st,aE as at,aF as ut,aG as lt,aH as ct,aI as gt,aJ as dt,aK as ft,aL as ht,aM as mt,aN as pt,aO as kt,aP as vt,aQ as St,aR as bt,aS as yt,aT as Tt,aU as Lt,aV as _t,aW as wt,aX as Ct,aY as Et,aZ as It,a_ as Pt,a$ as xt,b0 as Z,b1 as zt,U as Me,b2 as pe,b3 as z,b4 as Re,p as C,b5 as Y,Q as Mt,b6 as Ae,b7 as Fe,b8 as j,b9 as Rt,ba as At,bb as Ft,bc as Ot,bd as Dt,be as Nt,bf as Kt,bg as Wt,bh as Ht,bi as Bt,bj as $t,bk as qt,bl as Ut,bm as Vt,bn as Gt,bo as Zt,bp as Yt,bq as Qt,br as Xt,bs as Jt,bt as jt,bu as en,bv as tn,a2 as k,ac as ce,bw as nn,C as rn,q as on,bx as Oe,by as sn,bz as an,bA as un}from"./DRtkoAoK.js";import{V as N,a as ke,R as ve,E as ln,F as cn,B as gn,b as dn}from"./BzukyUd5.js";import{M as fn,c as hn,S as mn,a as pn,F as kn,w as De,b as vn,d as Sn,e as bn,f as yn}from"./Dx2_IAby.js";const Tn=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function Ln(n,e){return new _n(n,e)}class _n extends Ve{constructor(e,t){super(t.worker,t.keepIdleModels||!1,e),this._foreignModuleHost=t.host||null,this._foreignProxy=this._getProxy().then(r=>new Proxy({},{get(i,a,o){if(typeof a!="string")throw new Error("Not supported");if(a!=="then")return(...s)=>r.$fmr(a,s)}}))}fhr(e,t){if(!this._foreignModuleHost||typeof this._foreignModuleHost[e]!="function")return Promise.reject(new Error("Missing method "+e+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[e].apply(this._foreignModuleHost,t))}catch(r){return Promise.reject(r)}}getProxy(){return this._foreignProxy}withSyncedResources(e){return this.workerWithSyncedResources(e).then(t=>this.getProxy())}}var K;(function(n){n[n.None=0]="None",n[n.Open=1]="Open",n[n.Close=-1]="Close"})(K||(K={}));function wn(n){return Array.isArray(n)}function Cn(n){return!wn(n)}function Ne(n){return typeof n=="string"}function Le(n){return!Ne(n)}function A(n){return!n}function x(n,e){return n.ignoreCase&&e?e.toLowerCase():e}function _e(n){return n.replace(/[&<>'"_]/g,"-")}function En(n,e){console.log(`${n.languageId}: ${e}`)}function m(n,e){return new Error(`${n.languageId}: ${e}`)}function M(n,e,t,r,i){const a=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let o=null;return e.replace(a,function(s,u,l,c,d,f,v,I,ie){return A(l)?A(c)?!A(d)&&d<r.length?x(n,r[d]):!A(v)&&n&&typeof n[v]=="string"?n[v]:(o===null&&(o=i.split("."),o.unshift(i)),!A(f)&&f<o.length?x(n,o[f]):""):x(n,t):"$"})}function In(n,e,t){const r=/\$[sS](\d\d?)/g;let i=null;return e.replace(r,function(a,o){return i===null&&(i=t.split("."),i.unshift(t)),!A(o)&&o<i.length?x(n,i[o]):""})}function X(n,e){let t=e;for(;t&&t.length>0;){const r=n.tokenizer[t];if(r)return r;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return null}function Pn(n,e){let t=e;for(;t&&t.length>0;){if(n.stateNames[t])return!0;const i=t.lastIndexOf(".");i<0?t=null:t=t.substr(0,i)}return!1}var ge;const Ke=5,te=class te{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(e!==null&&e.depth>=this._maxCacheDepth)return new D(e,t);let r=D.getStackElementId(e);r.length>0&&(r+="|"),r+=t;let i=this._entries[r];return i||(i=new D(e,t),this._entries[r]=i,i)}};te._INSTANCE=new te(Ke);let q=te;class D{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;e!==null;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;e!==null&&t!==null;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return e===null&&t===null}equals(e){return D._equals(this,e)}push(e){return q.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return q.create(this.parent,e)}}class O{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new O(this.languageId,this.state)}}const ne=class ne{static create(e,t){return this._INSTANCE.create(e,t)}constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}create(e,t){if(t!==null)return new $(e,t);if(e!==null&&e.depth>=this._maxCacheDepth)return new $(e,t);const r=D.getStackElementId(e);let i=this._entries[r];return i||(i=new $(e,null),this._entries[r]=i,i)}};ne._INSTANCE=new ne(Ke);let R=ne;class ${constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:R.create(this.stack,this.embeddedLanguageData)}equals(e){return!(e instanceof $)||!this.stack.equals(e.stack)?!1:this.embeddedLanguageData===null&&e.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||e.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(e.embeddedLanguageData)}}class xn{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new ue(e,t,this._languageId)))}nestedLanguageTokenize(e,t,r,i){const a=r.languageId,o=r.state,s=_.get(a);if(!s)return this.enterLanguage(a),this.emit(i,""),o;const u=s.tokenize(e,t,o);if(i!==0)for(const l of u.tokens)this._tokens.push(new ue(l.offset+i,l.type,l.language));else this._tokens=this._tokens.concat(u.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,u.endState}finalize(e){return new xe(this._tokens,e)}}class ee{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=Qe.Null,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const r=this._theme.match(this._currentLanguageId,t)|B.BALANCED_BRACKETS_MASK;this._lastTokenMetadata!==r&&(this._lastTokenMetadata=r,this._tokens.push(e),this._tokens.push(r))}static _merge(e,t,r){const i=e!==null?e.length:0,a=t.length,o=r!==null?r.length:0;if(i===0&&a===0&&o===0)return new Uint32Array(0);if(i===0&&a===0)return r;if(a===0&&o===0)return e;const s=new Uint32Array(i+a+o);e!==null&&s.set(e);for(let u=0;u<a;u++)s[i+u]=t[u];return r!==null&&s.set(r,i+a),s}nestedLanguageTokenize(e,t,r,i){const a=r.languageId,o=r.state,s=_.get(a);if(!s)return this.enterLanguage(a),this.emit(i,""),o;const u=s.tokenizeEncoded(e,t,o);if(i!==0)for(let l=0,c=u.tokens.length;l<c;l+=2)u.tokens[l]+=i;return this._prependTokens=ee._merge(this._prependTokens,this._tokens,u.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,u.endState}finalize(e){return new me(ee._merge(this._prependTokens,this._tokens,null),e)}}let U=ge=class extends Ie{constructor(e,t,r,i,a){super(),this._configurationService=a,this._languageService=e,this._standaloneThemeService=t,this._languageId=r,this._lexer=i,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let o=!1;this._register(_.onDidChange(s=>{if(o)return;let u=!1;for(let l=0,c=s.changedLanguages.length;l<c;l++){const d=s.changedLanguages[l];if(this._embeddedLanguages[d]){u=!0;break}}u&&(o=!0,_.handleChange([this._languageId]),o=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(s=>{s.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const e=[];for(const t in this._embeddedLanguages){const r=_.get(t);if(r){if(r instanceof ge){const i=r.getLoadStatus();i.loaded===!1&&e.push(i.promise)}continue}_.isResolved(t)||e.push(_.getOrCreate(t))}return e.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(e).then(t=>{})}}getInitialState(){const e=q.create(null,this._lexer.start);return R.create(e,null)}tokenize(e,t,r){if(e.length>=this._maxTokenizationLineLength)return Pe(this._languageId,r);const i=new xn,a=this._tokenize(e,t,r,i);return i.finalize(a)}tokenizeEncoded(e,t,r){if(e.length>=this._maxTokenizationLineLength)return Ye(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),r);const i=new ee(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),a=this._tokenize(e,t,r,i);return i.finalize(a)}_tokenize(e,t,r,i){return r.embeddedLanguageData?this._nestedTokenize(e,t,r,0,i):this._myTokenize(e,t,r,0,i)}_findLeavingNestedLanguageOffset(e,t){let r=this._lexer.tokenizer[t.stack.state];if(!r&&(r=X(this._lexer,t.stack.state),!r))throw m(this._lexer,"tokenizer state is not defined: "+t.stack.state);let i=-1,a=!1;for(const o of r){if(!Le(o.action)||o.action.nextEmbedded!=="@pop")continue;a=!0;let s=o.resolveRegex(t.stack.state);const u=s.source;if(u.substr(0,4)==="^(?:"&&u.substr(u.length-1,1)===")"){const c=(s.ignoreCase?"i":"")+(s.unicode?"u":"");s=new RegExp(u.substr(4,u.length-5),c)}const l=e.search(s);l===-1||l!==0&&o.matchOnlyAtLineStart||(i===-1||l<i)&&(i=l)}if(!a)throw m(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return i}_nestedTokenize(e,t,r,i,a){const o=this._findLeavingNestedLanguageOffset(e,r);if(o===-1){const l=a.nestedLanguageTokenize(e,t,r.embeddedLanguageData,i);return R.create(r.stack,new O(r.embeddedLanguageData.languageId,l))}const s=e.substring(0,o);s.length>0&&a.nestedLanguageTokenize(s,!1,r.embeddedLanguageData,i);const u=e.substring(o);return this._myTokenize(u,t,r,i+o,a)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,r,i,a){a.enterLanguage(this._languageId);const o=e.length,s=t&&this._lexer.includeLF?e+`
`:e,u=s.length;let l=r.embeddedLanguageData,c=r.stack,d=0,f=null,v=!0;for(;v||d<u;){const I=d,ie=c.depth,Q=f?f.groups.length:0,w=c.state;let S=null,b=null,h=null,E=null,H=null;if(f){S=f.matches;const p=f.groups.shift();b=p.matched,h=p.action,E=f.rule,f.groups.length===0&&(f=null)}else{if(!v&&d>=u)break;v=!1;let p=this._lexer.tokenizer[w];if(!p&&(p=X(this._lexer,w),!p))throw m(this._lexer,"tokenizer state is not defined: "+w);const y=s.substr(d);for(const P of p)if((d===0||!P.matchOnlyAtLineStart)&&(S=y.match(P.resolveRegex(w)),S)){b=S[0],h=P.action;break}}if(S||(S=[""],b=""),h||(d<u&&(S=[s.charAt(d)],b=S[0]),h=this._lexer.defaultToken),b===null)break;for(d+=b.length;Cn(h)&&Le(h)&&h.test;)h=h.test(b,S,w,d===u);let L=null;if(typeof h=="string"||Array.isArray(h))L=h;else if(h.group)L=h.group;else if(h.token!==null&&h.token!==void 0){if(h.tokenSubst?L=M(this._lexer,h.token,b,S,w):L=h.token,h.nextEmbedded)if(h.nextEmbedded==="@pop"){if(!l)throw m(this._lexer,"cannot pop embedded language if not inside one");l=null}else{if(l)throw m(this._lexer,"cannot enter embedded language from within an embedded language");H=M(this._lexer,h.nextEmbedded,b,S,w)}if(h.goBack&&(d=Math.max(0,d-h.goBack)),h.switchTo&&typeof h.switchTo=="string"){let p=M(this._lexer,h.switchTo,b,S,w);if(p[0]==="@"&&(p=p.substr(1)),X(this._lexer,p))c=c.switchTo(p);else throw m(this._lexer,"trying to switch to a state '"+p+"' that is undefined in rule: "+this._safeRuleName(E))}else{if(h.transform&&typeof h.transform=="function")throw m(this._lexer,"action.transform not supported");if(h.next)if(h.next==="@push"){if(c.depth>=this._lexer.maxStack)throw m(this._lexer,"maximum tokenizer stack size reached: ["+c.state+","+c.parent.state+",...]");c=c.push(w)}else if(h.next==="@pop"){if(c.depth<=1)throw m(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(E));c=c.pop()}else if(h.next==="@popall")c=c.popall();else{let p=M(this._lexer,h.next,b,S,w);if(p[0]==="@"&&(p=p.substr(1)),X(this._lexer,p))c=c.push(p);else throw m(this._lexer,"trying to set a next state '"+p+"' that is undefined in rule: "+this._safeRuleName(E))}}h.log&&typeof h.log=="string"&&En(this._lexer,this._lexer.languageId+": "+M(this._lexer,h.log,b,S,w))}if(L===null)throw m(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(E));const ye=p=>{const y=this._languageService.getLanguageIdByLanguageName(p)||this._languageService.getLanguageIdByMimeType(p)||p,P=this._getNestedEmbeddedLanguageData(y);if(d<u){const Ue=e.substr(d);return this._nestedTokenize(Ue,t,R.create(c,P),i+d,a)}else return R.create(c,P)};if(Array.isArray(L)){if(f&&f.groups.length>0)throw m(this._lexer,"groups cannot be nested: "+this._safeRuleName(E));if(S.length!==L.length+1)throw m(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(E));let p=0;for(let y=1;y<S.length;y++)p+=S[y].length;if(p!==b.length)throw m(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(E));f={rule:E,matches:S,groups:[]};for(let y=0;y<L.length;y++)f.groups[y]={action:L[y],matched:S[y+1]};d-=b.length;continue}else{if(L==="@rematch"&&(d-=b.length,b="",S=null,L="",H!==null))return ye(H);if(b.length===0){if(u===0||ie!==c.depth||w!==c.state||(f?f.groups.length:0)!==Q)continue;throw m(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(E))}let p=null;if(Ne(L)&&L.indexOf("@brackets")===0){const y=L.substr(9),P=zn(this._lexer,b);if(!P)throw m(this._lexer,"@brackets token returned but no bracket defined as: "+b);p=_e(P.token+y)}else{const y=L===""?"":L+this._lexer.tokenPostfix;p=_e(y)}I<o&&a.emit(I+i,p)}if(H!==null)return ye(H)}return R.create(c,l)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new O(e,ae);e!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(e),_.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=_.get(e);return t?new O(e,t.getInitialState()):new O(e,ae)}};U=ge=Ge([Ze(4,he)],U);function zn(n,e){if(!e)return null;e=x(n,e);const t=n.brackets;for(const r of t){if(r.open===e)return{token:r.token,bracketType:K.Open};if(r.close===e)return{token:r.token,bracketType:K.Close}}return null}const oe=Xe("standaloneColorizer",{createHTML:n=>n});class Se{static colorizeElement(e,t,r,i){i=i||{};const a=i.theme||"vs",o=i.mimeType||r.getAttribute("lang")||r.getAttribute("data-lang");if(!o)return console.error("Mode not detected"),Promise.resolve();const s=t.getLanguageIdByMimeType(o)||o;e.setTheme(a);const u=r.firstChild?r.firstChild.nodeValue:"";r.className+=" "+a;const l=c=>{const d=(oe==null?void 0:oe.createHTML(c))??c;r.innerHTML=d};return this.colorize(t,u||"",s,i).then(l,c=>console.error(c))}static async colorize(e,t,r,i){const a=e.languageIdCodec;let o=4;i&&typeof i.tabSize=="number"&&(o=i.tabSize),Je(t)&&(t=t.substr(1));const s=ze(t);if(!e.isRegisteredLanguageId(r))return we(s,o,a);const u=await _.getOrCreate(r);return u?Mn(s,o,u,a):we(s,o,a)}static colorizeLine(e,t,r,i,a=4){const o=N.isBasicASCII(e,t),s=N.containsRTL(e,o,r);return ke(new ve(!1,!0,e,!1,o,s,0,i,[],a,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(e,t,r=4){const i=e.getLineContent(t);e.tokenization.forceTokenization(t);const o=e.tokenization.getLineTokens(t).inflate();return this.colorizeLine(i,e.mightContainNonBasicASCII(),e.mightContainRTL(),o,r)}}function Mn(n,e,t,r){return new Promise((i,a)=>{const o=()=>{const s=Rn(n,e,t,r);if(t instanceof U){const u=t.getLoadStatus();if(u.loaded===!1){u.promise.then(o,a);return}}i(s)};o()})}function we(n,e,t){let r=[];const i=(je.None<<B.FONT_STYLE_OFFSET|Te.DefaultForeground<<B.FOREGROUND_OFFSET|Te.DefaultBackground<<B.BACKGROUND_OFFSET)>>>0,a=new Uint32Array(2);a[0]=0,a[1]=i;for(let o=0,s=n.length;o<s;o++){const u=n[o];a[0]=u.length;const l=new le(a,u,t),c=N.isBasicASCII(u,!0),d=N.containsRTL(u,c,!0),f=ke(new ve(!1,!0,u,!1,c,d,0,l,[],e,0,0,0,0,-1,"none",!1,!1,null));r=r.concat(f.html),r.push("<br/>")}return r.join("")}function Rn(n,e,t,r){let i=[],a=t.getInitialState();for(let o=0,s=n.length;o<s;o++){const u=n[o],l=t.tokenizeEncoded(u,!0,a);le.convertToEndOffset(l.tokens,u.length);const c=new le(l.tokens,u,r),d=N.isBasicASCII(u,!0),f=N.containsRTL(u,d,!0),v=ke(new ve(!1,!0,u,!1,d,f,0,c.inflate(),[],e,0,0,0,0,-1,"none",!1,!1,null));i=i.concat(v.html),i.push("<br/>"),a=l.endState}return i.join("")}et(Tn);function An(n,e,t){return g.initialize(t||{}).createInstance(pn,n,e)}function Fn(n){return g.get(Z).onCodeEditorAdd(t=>{n(t)})}function On(n){return g.get(Z).onDiffEditorAdd(t=>{n(t)})}function Dn(){return g.get(Z).listCodeEditors()}function Nn(){return g.get(Z).listDiffEditors()}function Kn(n,e,t){return g.initialize(t||{}).createInstance(mn,n,e)}function Wn(n,e){const t=g.initialize(e||{});return new fn(n,{},t)}function Hn(n){if(typeof n.id!="string"||typeof n.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return pe.registerCommand(n.id,n.run)}function Bn(n){if(typeof n.id!="string"||typeof n.label!="string"||typeof n.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const e=j.deserialize(n.precondition),t=(i,...a)=>Ot.runEditorCommand(i,a,e,(o,s,u)=>Promise.resolve(n.run(s,...u))),r=new Rt;if(r.add(pe.registerCommand(n.id,t)),n.contextMenuGroupId){const i={command:{id:n.id,title:n.label},when:e,group:n.contextMenuGroupId,order:n.contextMenuOrder||0};r.add(At.appendMenuItem(Ft.EditorContext,i))}if(Array.isArray(n.keybindings)){const i=g.get(Ae);if(!(i instanceof Fe))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const a=j.and(e,j.deserialize(n.keybindingContext));r.add(i.addDynamicKeybindings(n.keybindings.map(o=>({keybinding:o,command:n.id,when:a}))))}}return r}function $n(n){return We([n])}function We(n){const e=g.get(Ae);return e instanceof Fe?e.addDynamicKeybindings(n.map(t=>({keybinding:t.keybinding,command:t.command,commandArgs:t.commandArgs,when:j.deserialize(t.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),Ie.None)}function qn(n,e,t){const r=g.get(C),i=r.getLanguageIdByMimeType(e)||e;return hn(g.get(F),r,n,i,t)}function Un(n,e){const t=g.get(C),r=t.getLanguageIdByMimeType(e)||e||Mt;n.setLanguage(t.createById(r))}function Vn(n,e,t){n&&g.get(Y).changeOne(e,n.uri,t)}function Gn(n){g.get(Y).changeAll(n,[])}function Zn(n){return g.get(Y).read(n)}function Yn(n){return g.get(Y).onMarkerChanged(n)}function Qn(n){return g.get(F).getModel(n)}function Xn(){return g.get(F).getModels()}function Jn(n){return g.get(F).onModelAdded(n)}function jn(n){return g.get(F).onModelRemoved(n)}function er(n){return g.get(F).onModelLanguageChanged(t=>{n({model:t.model,oldLanguage:t.oldLanguageId})})}function He(n){return Ln(g.get(F),n)}function tr(n,e){const t=g.get(C),r=g.get(z);return Se.colorizeElement(r,t,n,e).then(()=>{r.registerEditorContainer(n)})}function nr(n,e,t){const r=g.get(C);return g.get(z).registerEditorContainer(Re.document.body),Se.colorize(r,n,e,t)}function rr(n,e,t=4){return g.get(z).registerEditorContainer(Re.document.body),Se.colorizeModelLine(n,e,t)}function ir(n){const e=_.get(n);return e||{getInitialState:()=>ae,tokenize:(t,r,i)=>Pe(n,i)}}function or(n,e){_.getOrCreate(e);const t=ir(e),r=ze(n),i=[];let a=t.getInitialState();for(let o=0,s=r.length;o<s;o++){const u=r[o],l=t.tokenize(u,!0,a);i[o]=l.tokens,a=l.endState}return i}function sr(n,e){g.get(z).defineTheme(n,e)}function ar(n){g.get(z).setTheme(n)}function ur(){dn.clearAllFontInfos()}function lr(n,e){return pe.registerCommand({id:n,handler:e})}function cr(n){return g.get(zt).registerOpener({async open(t){return typeof t=="string"&&(t=Me.parse(t)),n.open(t)}})}function gr(n){return g.get(Z).registerCodeEditorOpenHandler(async(t,r,i)=>{var s;if(!r)return null;const a=(s=t.options)==null?void 0:s.selection;let o;return a&&typeof a.endLineNumber=="number"&&typeof a.endColumn=="number"?o=a:a&&(o={lineNumber:a.startLineNumber,column:a.startColumn}),await n.openCodeEditor(r,t.resource,o)?r:null})}function dr(){return{create:An,getEditors:Dn,getDiffEditors:Nn,onDidCreateEditor:Fn,onDidCreateDiffEditor:On,createDiffEditor:Kn,addCommand:Hn,addEditorAction:Bn,addKeybindingRule:$n,addKeybindingRules:We,createModel:qn,setModelLanguage:Un,setModelMarkers:Vn,getModelMarkers:Zn,removeAllMarkers:Gn,onDidChangeMarkers:Yn,getModels:Xn,getModel:Qn,onDidCreateModel:Jn,onWillDisposeModel:jn,onDidChangeModelLanguage:er,createWebWorker:He,colorizeElement:tr,colorize:nr,colorizeModelLine:rr,tokenize:or,defineTheme:sr,setTheme:ar,remeasureFonts:ur,registerCommand:lr,registerLinkOpener:cr,registerEditorOpener:gr,AccessibilitySupport:xt,ContentWidgetPositionPreference:Pt,CursorChangeReason:It,DefaultEndOfLine:Et,EditorAutoIndentStrategy:Ct,EditorOption:wt,EndOfLinePreference:_t,EndOfLineSequence:Lt,MinimapPosition:Tt,MinimapSectionHeaderStyle:yt,MouseTargetType:bt,OverlayWidgetPositionPreference:St,OverviewRulerLane:vt,GlyphMarginLane:kt,RenderLineNumbersType:pt,RenderMinimap:mt,ScrollbarVisibility:ht,ScrollType:ft,TextEditorCursorBlinkingStyle:dt,TextEditorCursorStyle:gt,TrackedRangeStickiness:ct,WrappingIndent:lt,InjectedTextCursorStops:ut,PositionAffinity:at,ShowLightbulbIconMode:st,ConfigurationChangedEvent:ot,BareFontInfo:gn,FontInfo:cn,TextModelResolvedOptions:it,FindMatch:rt,ApplyUpdateResult:nt,EditorZoom:ln,createMultiFileDiffEditor:Wn,EditorType:tt,EditorOptions:G}}function fr(n,e){if(!e||!Array.isArray(e))return!1;for(const t of e)if(!n(t))return!1;return!0}function J(n,e){return typeof n=="boolean"?n:e}function Ce(n,e){return typeof n=="string"?n:e}function hr(n){const e={};for(const t of n)e[t]=!0;return e}function Ee(n,e=!1){e&&(n=n.map(function(r){return r.toLowerCase()}));const t=hr(n);return e?function(r){return t[r.toLowerCase()]!==void 0&&t.hasOwnProperty(r.toLowerCase())}:function(r){return t[r]!==void 0&&t.hasOwnProperty(r)}}function de(n,e,t){e=e.replace(/@@/g,"");let r=0,i;do i=!1,e=e.replace(/@(\w+)/g,function(o,s){i=!0;let u="";if(typeof n[s]=="string")u=n[s];else if(n[s]&&n[s]instanceof RegExp)u=n[s].source;else throw n[s]===void 0?m(n,"language definition does not contain attribute '"+s+"', used at: "+e):m(n,"attribute reference '"+s+"' must be a string, used at: "+e);return A(u)?"":"(?:"+u+")"}),r++;while(i&&r<5);e=e.replace(/\x01/g,"@");const a=(n.ignoreCase?"i":"")+(n.unicode?"u":"");if(t&&e.match(/\$[sS](\d\d?)/g)){let s=null,u=null;return l=>(u&&s===l||(s=l,u=new RegExp(In(n,e,l),a)),u)}return new RegExp(e,a)}function mr(n,e,t,r){if(r<0)return n;if(r<e.length)return e[r];if(r>=100){r=r-100;const i=t.split(".");if(i.unshift(t),r<i.length)return i[r]}return null}function pr(n,e,t,r){let i=-1,a=t,o=t.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);o&&(o[3]&&(i=parseInt(o[3]),o[2]&&(i=i+100)),a=o[4]);let s="~",u=a;!a||a.length===0?(s="!=",u=""):/^\w*$/.test(u)?s="==":(o=a.match(/^(@|!@|~|!~|==|!=)(.*)$/),o&&(s=o[1],u=o[2]));let l;if((s==="~"||s==="!~")&&/^(\w|\|)*$/.test(u)){const c=Ee(u.split("|"),n.ignoreCase);l=function(d){return s==="~"?c(d):!c(d)}}else if(s==="@"||s==="!@"){const c=n[u];if(!c)throw m(n,"the @ match target '"+u+"' is not defined, in rule: "+e);if(!fr(function(f){return typeof f=="string"},c))throw m(n,"the @ match target '"+u+"' must be an array of strings, in rule: "+e);const d=Ee(c,n.ignoreCase);l=function(f){return s==="@"?d(f):!d(f)}}else if(s==="~"||s==="!~")if(u.indexOf("$")<0){const c=de(n,"^"+u+"$",!1);l=function(d){return s==="~"?c.test(d):!c.test(d)}}else l=function(c,d,f,v){return de(n,"^"+M(n,u,d,f,v)+"$",!1).test(c)};else if(u.indexOf("$")<0){const c=x(n,u);l=function(d){return s==="=="?d===c:d!==c}}else{const c=x(n,u);l=function(d,f,v,I,ie){const Q=M(n,c,f,v,I);return s==="=="?d===Q:d!==Q}}return i===-1?{name:t,value:r,test:function(c,d,f,v){return l(c,c,d,f,v)}}:{name:t,value:r,test:function(c,d,f,v){const I=mr(c,d,f,i);return l(I||"",c,d,f,v)}}}function fe(n,e,t){if(t){if(typeof t=="string")return t;if(t.token||t.token===""){if(typeof t.token!="string")throw m(n,"a 'token' attribute must be of type string, in rule: "+e);{const r={token:t.token};if(t.token.indexOf("$")>=0&&(r.tokenSubst=!0),typeof t.bracket=="string")if(t.bracket==="@open")r.bracket=K.Open;else if(t.bracket==="@close")r.bracket=K.Close;else throw m(n,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+e);if(t.next){if(typeof t.next!="string")throw m(n,"the next state must be a string value in rule: "+e);{let i=t.next;if(!/^(@pop|@push|@popall)$/.test(i)&&(i[0]==="@"&&(i=i.substr(1)),i.indexOf("$")<0&&!Pn(n,M(n,i,"",[],""))))throw m(n,"the next state '"+t.next+"' is not defined in rule: "+e);r.next=i}}return typeof t.goBack=="number"&&(r.goBack=t.goBack),typeof t.switchTo=="string"&&(r.switchTo=t.switchTo),typeof t.log=="string"&&(r.log=t.log),typeof t.nextEmbedded=="string"&&(r.nextEmbedded=t.nextEmbedded,n.usesEmbedded=!0),r}}else if(Array.isArray(t)){const r=[];for(let i=0,a=t.length;i<a;i++)r[i]=fe(n,e,t[i]);return{group:r}}else if(t.cases){const r=[];for(const a in t.cases)if(t.cases.hasOwnProperty(a)){const o=fe(n,e,t.cases[a]);a==="@default"||a==="@"||a===""?r.push({test:void 0,value:o,name:a}):a==="@eos"?r.push({test:function(s,u,l,c){return c},value:o,name:a}):r.push(pr(n,e,a,o))}const i=n.defaultToken;return{test:function(a,o,s,u){for(const l of r)if(!l.test||l.test(a,o,s,u))return l.value;return i}}}else throw m(n,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+e)}else return{token:""}}class kr{constructor(e){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=e}setRegex(e,t){let r;if(typeof t=="string")r=t;else if(t instanceof RegExp)r=t.source;else throw m(e,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=r.length>0&&r[0]==="^",this.name=this.name+": "+r,this.regex=de(e,"^(?:"+(this.matchOnlyAtLineStart?r.substr(1):r)+")",!0)}setAction(e,t){this.action=fe(e,this.name,t)}resolveRegex(e){return this.regex instanceof RegExp?this.regex:this.regex(e)}}function Be(n,e){if(!e||typeof e!="object")throw new Error("Monarch: expecting a language definition object");const t={languageId:n,includeLF:J(e.includeLF,!1),noThrow:!1,maxStack:100,start:typeof e.start=="string"?e.start:null,ignoreCase:J(e.ignoreCase,!1),unicode:J(e.unicode,!1),tokenPostfix:Ce(e.tokenPostfix,"."+n),defaultToken:Ce(e.defaultToken,"source"),usesEmbedded:!1,stateNames:{},tokenizer:{},brackets:[]},r=e;r.languageId=n,r.includeLF=t.includeLF,r.ignoreCase=t.ignoreCase,r.unicode=t.unicode,r.noThrow=t.noThrow,r.usesEmbedded=t.usesEmbedded,r.stateNames=e.tokenizer,r.defaultToken=t.defaultToken;function i(o,s,u){for(const l of u){let c=l.include;if(c){if(typeof c!="string")throw m(t,"an 'include' attribute must be a string at: "+o);if(c[0]==="@"&&(c=c.substr(1)),!e.tokenizer[c])throw m(t,"include target '"+c+"' is not defined at: "+o);i(o+"."+c,s,e.tokenizer[c])}else{const d=new kr(o);if(Array.isArray(l)&&l.length>=1&&l.length<=3)if(d.setRegex(r,l[0]),l.length>=3)if(typeof l[1]=="string")d.setAction(r,{token:l[1],next:l[2]});else if(typeof l[1]=="object"){const f=l[1];f.next=l[2],d.setAction(r,f)}else throw m(t,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+o);else d.setAction(r,l[1]);else{if(!l.regex)throw m(t,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+o);l.name&&typeof l.name=="string"&&(d.name=l.name),l.matchOnlyAtStart&&(d.matchOnlyAtLineStart=J(l.matchOnlyAtLineStart,!1)),d.setRegex(r,l.regex),d.setAction(r,l.action)}s.push(d)}}}if(!e.tokenizer||typeof e.tokenizer!="object")throw m(t,"a language definition must define the 'tokenizer' attribute as an object");t.tokenizer=[];for(const o in e.tokenizer)if(e.tokenizer.hasOwnProperty(o)){t.start||(t.start=o);const s=e.tokenizer[o];t.tokenizer[o]=new Array,i("tokenizer."+o,t.tokenizer[o],s)}if(t.usesEmbedded=r.usesEmbedded,e.brackets){if(!Array.isArray(e.brackets))throw m(t,"the 'brackets' attribute must be defined as an array")}else e.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const a=[];for(const o of e.brackets){let s=o;if(s&&Array.isArray(s)&&s.length===3&&(s={token:s[2],open:s[0],close:s[1]}),s.open===s.close)throw m(t,"open and close brackets in a 'brackets' attribute must be different: "+s.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof s.open=="string"&&typeof s.token=="string"&&typeof s.close=="string")a.push({token:s.token+t.tokenPostfix,open:x(t,s.open),close:x(t,s.close)});else throw m(t,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return t.brackets=a,t.noThrow=!0,t}function vr(n){Oe.registerLanguage(n)}function Sr(){let n=[];return n=n.concat(Oe.getLanguages()),n}function br(n){return g.get(C).languageIdCodec.encodeLanguageId(n)}function yr(n,e){return g.withServices(()=>{const r=g.get(C).onDidRequestRichLanguageFeatures(i=>{i===n&&(r.dispose(),e())});return r})}function Tr(n,e){return g.withServices(()=>{const r=g.get(C).onDidRequestBasicLanguageFeatures(i=>{i===n&&(r.dispose(),e())});return r})}function Lr(n,e){if(!g.get(C).isRegisteredLanguageId(n))throw new Error(`Cannot set configuration for unknown language ${n}`);return g.get(on).register(n,e,100)}class _r{constructor(e,t){this._languageId=e,this._actual=t}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize(e,t,r){if(typeof this._actual.tokenize=="function")return V.adaptTokenize(this._languageId,this._actual,e,r);throw new Error("Not supported!")}tokenizeEncoded(e,t,r){const i=this._actual.tokenizeEncoded(e,r);return new me(i.tokens,i.endState)}}class V{constructor(e,t,r,i){this._languageId=e,this._actual=t,this._languageService=r,this._standaloneThemeService=i}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens(e,t){const r=[];let i=0;for(let a=0,o=e.length;a<o;a++){const s=e[a];let u=s.startIndex;a===0?u=0:u<i&&(u=i),r[a]=new ue(u,s.scopes,t),i=u}return r}static adaptTokenize(e,t,r,i){const a=t.tokenize(r,i),o=V._toClassicTokens(a.tokens,e);let s;return a.endState.equals(i)?s=i:s=a.endState,new xe(o,s)}tokenize(e,t,r){return V.adaptTokenize(this._languageId,this._actual,e,r)}_toBinaryTokens(e,t){const r=e.encodeLanguageId(this._languageId),i=this._standaloneThemeService.getColorTheme().tokenTheme,a=[];let o=0,s=0;for(let l=0,c=t.length;l<c;l++){const d=t[l],f=i.match(r,d.scopes)|B.BALANCED_BRACKETS_MASK;if(o>0&&a[o-1]===f)continue;let v=d.startIndex;l===0?v=0:v<s&&(v=s),a[o++]=v,a[o++]=f,s=v}const u=new Uint32Array(o);for(let l=0;l<o;l++)u[l]=a[l];return u}tokenizeEncoded(e,t,r){const i=this._actual.tokenize(e,r),a=this._toBinaryTokens(this._languageService.languageIdCodec,i.tokens);let o;return i.endState.equals(r)?o=r:o=i.endState,new me(a,o)}}function wr(n){return typeof n.getInitialState=="function"}function Cr(n){return"tokenizeEncoded"in n}function $e(n){return n&&typeof n.then=="function"}function Er(n){const e=g.get(z);if(n){const t=[null];for(let r=1,i=n.length;r<i;r++)t[r]=rn.fromHex(n[r]);e.setColorMapOverride(t)}else e.setColorMapOverride(null)}function qe(n,e){return Cr(e)?new _r(n,e):new V(n,e,g.get(C),g.get(z))}function be(n,e){const t=new nn(async()=>{const r=await Promise.resolve(e.create());return r?wr(r)?qe(n,r):new U(g.get(C),g.get(z),n,Be(n,r),g.get(he)):null});return _.registerFactory(n,t)}function Ir(n,e){if(!g.get(C).isRegisteredLanguageId(n))throw new Error(`Cannot set tokens provider for unknown language ${n}`);return $e(e)?be(n,{create:()=>e}):_.register(n,qe(n,e))}function Pr(n,e){const t=r=>new U(g.get(C),g.get(z),n,Be(n,r),g.get(he));return $e(e)?be(n,{create:()=>e}):_.register(n,t(e))}function xr(n,e){return g.get(k).referenceProvider.register(n,e)}function zr(n,e){return g.get(k).renameProvider.register(n,e)}function Mr(n,e){return g.get(k).newSymbolNamesProvider.register(n,e)}function Rr(n,e){return g.get(k).signatureHelpProvider.register(n,e)}function Ar(n,e){return g.get(k).hoverProvider.register(n,{provideHover:async(r,i,a,o)=>{const s=r.getWordAtPosition(i);return Promise.resolve(e.provideHover(r,i,a,o)).then(u=>{if(u)return!u.range&&s&&(u.range=new ce(i.lineNumber,s.startColumn,i.lineNumber,s.endColumn)),u.range||(u.range=new ce(i.lineNumber,i.column,i.lineNumber,i.column)),u})}})}function Fr(n,e){return g.get(k).documentSymbolProvider.register(n,e)}function Or(n,e){return g.get(k).documentHighlightProvider.register(n,e)}function Dr(n,e){return g.get(k).linkedEditingRangeProvider.register(n,e)}function Nr(n,e){return g.get(k).definitionProvider.register(n,e)}function Kr(n,e){return g.get(k).implementationProvider.register(n,e)}function Wr(n,e){return g.get(k).typeDefinitionProvider.register(n,e)}function Hr(n,e){return g.get(k).codeLensProvider.register(n,e)}function Br(n,e,t){return g.get(k).codeActionProvider.register(n,{providedCodeActionKinds:t==null?void 0:t.providedCodeActionKinds,documentation:t==null?void 0:t.documentation,provideCodeActions:(i,a,o,s)=>{const l=g.get(Y).read({resource:i.uri}).filter(c=>ce.areIntersectingOrTouching(c,a));return e.provideCodeActions(i,a,{markers:l,only:o.only,trigger:o.trigger},s)},resolveCodeAction:e.resolveCodeAction})}function $r(n,e){return g.get(k).documentFormattingEditProvider.register(n,e)}function qr(n,e){return g.get(k).documentRangeFormattingEditProvider.register(n,e)}function Ur(n,e){return g.get(k).onTypeFormattingEditProvider.register(n,e)}function Vr(n,e){return g.get(k).linkProvider.register(n,e)}function Gr(n,e){return g.get(k).completionProvider.register(n,e)}function Zr(n,e){return g.get(k).colorProvider.register(n,e)}function Yr(n,e){return g.get(k).foldingRangeProvider.register(n,e)}function Qr(n,e){return g.get(k).declarationProvider.register(n,e)}function Xr(n,e){return g.get(k).selectionRangeProvider.register(n,e)}function Jr(n,e){return g.get(k).documentSemanticTokensProvider.register(n,e)}function jr(n,e){return g.get(k).documentRangeSemanticTokensProvider.register(n,e)}function ei(n,e){return g.get(k).inlineCompletionsProvider.register(n,e)}function ti(n,e){return g.get(k).inlineEditProvider.register(n,e)}function ni(n,e){return g.get(k).inlayHintsProvider.register(n,e)}function ri(){return{register:vr,getLanguages:Sr,onLanguage:yr,onLanguageEncountered:Tr,getEncodedLanguageId:br,setLanguageConfiguration:Lr,setColorMap:Er,registerTokensProviderFactory:be,setTokensProvider:Ir,setMonarchTokensProvider:Pr,registerReferenceProvider:xr,registerRenameProvider:zr,registerNewSymbolNameProvider:Mr,registerCompletionItemProvider:Gr,registerSignatureHelpProvider:Rr,registerHoverProvider:Ar,registerDocumentSymbolProvider:Fr,registerDocumentHighlightProvider:Or,registerLinkedEditingRangeProvider:Dr,registerDefinitionProvider:Nr,registerImplementationProvider:Kr,registerTypeDefinitionProvider:Wr,registerCodeLensProvider:Hr,registerCodeActionProvider:Br,registerDocumentFormattingEditProvider:$r,registerDocumentRangeFormattingEditProvider:qr,registerOnTypeFormattingEditProvider:Ur,registerLinkProvider:Vr,registerColorProvider:Zr,registerFoldingRangeProvider:Yr,registerDeclarationProvider:Qr,registerSelectionRangeProvider:Xr,registerDocumentSemanticTokensProvider:Jr,registerDocumentRangeSemanticTokensProvider:jr,registerInlineCompletionsProvider:ei,registerInlineEditProvider:ti,registerInlayHintsProvider:ni,DocumentHighlightKind:tn,CompletionItemKind:en,CompletionItemTag:jt,CompletionItemInsertTextRule:Jt,SymbolKind:Xt,SymbolTag:Qt,IndentAction:Yt,CompletionTriggerKind:Zt,SignatureHelpTriggerKind:Gt,InlayHintKind:Vt,InlineCompletionTriggerKind:Ut,InlineEditTriggerKind:qt,CodeActionTriggerType:$t,NewSymbolNameTag:Bt,NewSymbolNameTriggerKind:Ht,PartialAcceptTriggerKind:Wt,HoverVerbosityAction:Kt,FoldingRangeKind:Nt,SelectedSuggestionInfo:Dt}}G.wrappingIndent.defaultValue=an.None;G.glyphMargin.defaultValue=!1;G.autoIndent.defaultValue=un.Advanced;G.overviewRulerLanes.defaultValue=2;kn.setFormatterSelector((n,e,t)=>Promise.resolve(n[0]));const T=sn();T.editor=dr();T.languages=ri();const mi=T.CancellationTokenSource,pi=T.Emitter,ki=T.KeyCode,vi=T.KeyMod,Si=T.Position,bi=T.Range,yi=T.Selection,Ti=T.SelectionDirection,Li=T.MarkerSeverity,_i=T.MarkerTag,wi=T.Uri,Ci=T.Token,W=T.editor,re=T.languages,se=globalThis.MonacoEnvironment;(se!=null&&se.globalAPI||typeof globalThis.define=="function"&&globalThis.define.amd)&&(globalThis.monaco=T);const ii=re.onLanguage;re.onLanguage=(n,e)=>De(()=>ii(n,e));const oi=re.onLanguage;re.onLanguageEncountered=(n,e)=>De(()=>oi(n,e));W.create=vn;W.createDiffEditor=Sn;W.createModelReference=bn;W.writeFile=yn;let si=0;function ai(n){const e=n.label||"anonymous"+ ++si,t=globalThis.MonacoEnvironment;if(t){if(typeof t.getWorker=="function")return t.getWorker("workerMain.js",e);if(typeof t.getWorkerUrl=="function"){const r=t.getWorkerUrl("workerMain.js",e);return new Worker(r,{name:e,type:"module"})}}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function ui(n){return"moduleId"in n}const li=W.createWebWorker;function ci(n){if(ui(n)){const e=ai({esmModuleLocation:Me.parse(n.moduleId),label:n.label}),t=He({worker:e,host:n.host,keepIdleModels:n.keepIdleModels});return(async()=>(await t.getProxy()).$initialize(n.createData))(),t}else return li(n)}W.createWebWorker=ci;export{mi as CancellationTokenSource,pi as Emitter,ki as KeyCode,vi as KeyMod,Li as MarkerSeverity,_i as MarkerTag,Si as Position,bi as Range,yi as Selection,Ti as SelectionDirection,Ci as Token,wi as Uri,ci as createWebWorker,W as editor,re as languages};
//# sourceMappingURL=ID0doArB.js.map
