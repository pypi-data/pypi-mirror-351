import{c as N,a as Q}from"./Ddg5X7gK.js";import{p as de,u as ge,G as he,f as Z,t as me,g as z,d as k,a as Se,e as le,h as ae,H as _e,x as ce}from"./mF3OkLKa.js";import{b as ve,c as be,a as Ee,e as $e}from"./UAtXrf73.js";import{p as K,b as ze,a as re}from"./C8XeOgap.js";const Ie=e=>Object.keys(e).reduce((t,n)=>{const i=e[n];return i==null?t:t+`${n}:${i};`},""),pe=(e,t)=>"_"+t;function*Re([e,t]){for(let n=e;n<=t;n++)yield n}const D=null,{min:B,max:p,abs:fe,floor:Le}=Math,ye=(e,t,n)=>B(n,p(t,e)),ke=e=>[...e].sort((t,n)=>t-n),Me=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},ie=e=>{let t,n;return()=>(t||(t=!0,n=e()),n)},P=-1,ee=(e,t,n)=>{const i=n?"unshift":"push";for(let a=0;a<t;a++)e[i](P);return e},te=(e,t)=>{const n=e.t[t];return n===P?e.o:n},Be=(e,t,n)=>{const i=e.t[t]===P;return e.t[t]=n,e.i=B(t,e.i),i},j=(e,t)=>{if(!e.l)return 0;if(e.i>=t)return e.u[t];e.i<0&&(e.u[0]=0,e.i=0);let n=e.i,i=e.u[n];for(;n<t;)i+=te(e,n),e.u[++n]=i;return e.i=t,i},M=(e,t,n=0,i=e.l-1)=>{for(;n<=i;){const a=Le((n+i)/2),f=j(e,a);if(f<=t){if(f+te(e,a)>t)return a;n=a+1}else i=a-1}return ye(n,0,e.l-1)},ue=(e,t,n)=>{const i=t-e.l;return e.i=n?-1:B(t-1,e.i),e.l=t,i>0?(ee(e.u,i),ee(e.t,i,n),e.o*i):(e.u.splice(i),(n?e.t.splice(0,-i):e.t.splice(i)).reduce((a,f)=>a-(f===P?e.o:f),0))},Pe=typeof window<"u",we=()=>document.documentElement,qe=e=>e.ownerDocument,Ce=e=>e.defaultView,xe=ie(()=>!!Pe&&getComputedStyle(we()).direction==="rtl"),Oe=ie(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Je=ie(()=>"scrollBehavior"in we().style),Ke=5,De=6,Ue=1,We=4,Ge=8,Xe=e=>p(e.$getTotalSize(),e.$getViewportSize()),Ye=e=>!!e.$getViewportSize(),Ae=(e,t=40,n=4,i=0,a,f=!1)=>{let g=!!i,s=1,r=0,l=0,S=0,d=0,u=0,h=0,b=0,_=0,O=g?[0,p(i-1,0)]:D,x=[0,0],T=0;const v=((o,c,V)=>({o:c,t:ee([],o),l:o,i:-1,u:ee([],o)}))(e,t),U=new Set,q=()=>S-l,C=()=>q()+u+d,Y=o=>((c,V,L,m)=>{if(m=B(m,c.l-1),j(c,m)<=V){const y=M(c,V+L,m);return[M(c,V,m,y),y]}{const y=M(c,V,void 0,m);return[y,M(c,V+L,y)]}})(v,o,r,x[0]),W=()=>(o=>o.l?j(o,o.l-1)+te(o,o.l-1):0)(v),A=o=>j(v,o)-u,J=o=>te(v,o),G=o=>{o&&(Oe()&&b!==0?u+=o:d+=o)};return{$getStateVersion:()=>s,$getCacheSnapshot:()=>(o=>[o.t.slice(),o.o])(v),$getRange:()=>{let o,c;return h?[o,c]=x:([o,c]=x=Y(p(0,C())),O&&(o=B(o,O[0]),c=p(c,O[1]))),b!==1&&(o-=p(0,n)),b!==2&&(c+=p(0,n)),[p(o,0),B(c,v.l-1)]},$findStartIndex:()=>M(v,C()),$findEndIndex:()=>M(v,C()+r),$isUnmeasuredItem:o=>v.t[o]===P,$:()=>!!O&&v.t.slice(p(0,O[0]-1),B(v.l-1,O[1]+1)+1).includes(P),$getItemOffset:A,$getItemSize:J,$getItemsLength:()=>v.l,$getScrollOffset:()=>S,$isScrolling:()=>b!==0,$getViewportSize:()=>r,$getStartSpacerSize:()=>l,$getTotalSize:W,h:()=>(h=d,d=0,[h,_===2||q()+r>=W()]),$subscribe:(o,c)=>{const V=[o,c];return U.add(V),()=>{U.delete(V)}},$update:(o,c)=>{let V,L,m=0;switch(o){case 1:{const y=h;h=0;const I=c-S,w=fe(I);y&&w<fe(y)+1||_!==0||(b=I<0?2:1),g&&(O=D,g=!1),S=c,m=4;const E=q();E>=-r&&E<=W()&&(m+=1,L=w>r);break}case 2:m=8,b!==0&&(V=!0,m+=1),b=0,_=0,O=D;break;case 3:{const y=c.filter(([I,w])=>v.t[I]!==w);if(!y.length)break;G(y.reduce((I,[w,E])=>((_===2||(O?!g&&w<O[0]:A(w)+(b===0&&_===0?J(w):0)<q()))&&(I+=E-J(w)),I),0));for(const[I,w]of y){const E=J(I),$=Be(v,I,w);f&&(T+=$?w:w-E)}f&&r&&T>r&&(G(((I,w)=>{let E=0;const $=[];I.t.forEach((oe,Te)=>{oe!==P&&($.push(oe),Te<w&&E++)}),I.i=-1;const R=ke($),H=R.length,X=H/2|0,ne=H%2==0?(R[X-1]+R[X])/2:R[X],Ve=I.o;return((I.o=ne)-Ve)*p(w-E,0)})(v,M(v,C()))),f=!1),m=3,L=!0;break}case 4:r!==c&&(r=c,m=3);break;case 5:c[1]?(G(ue(v,c[0],!0)),_=2,m=1):(ue(v,c[0]),m=1);break;case 6:l=c;break;case 7:_=1;break;case 8:O=Y(c),m=1}m&&(s=1+(2147483647&s),V&&u&&(d+=u,u=0),U.forEach(([y,I])=>{m&y&&I(L)}))}}},se=setTimeout,F=(e,t)=>t&&xe()?-e:e,He=(e,t,n,i,a,f)=>{const g=Date.now;let s=0,r=!1,l=!1,S=!1,d=!1;const u=(()=>{let x;const T=()=>{x!=D&&clearTimeout(x)},v=()=>{T(),x=se(()=>{x=D,(()=>{if(r||l)return r=!1,void u();S=!1,e.$update(2)})()},150)};return v.p=T,v})(),h=()=>{s=g(),S&&(d=!0),e.$update(1,i()),u()},b=x=>{if(r||!e.$isScrolling()||x.ctrlKey)return;const T=g()-s;150>T&&50<T&&(n?x.deltaX:x.deltaY)&&(r=!0)},_=()=>{l=!0,S=d=!1},O=()=>{l=!1,Oe()&&(S=!0)};return t.addEventListener("scroll",h),t.addEventListener("wheel",b,{passive:!0}),t.addEventListener("touchstart",_,{passive:!0}),t.addEventListener("touchend",O,{passive:!0}),{m:()=>{t.removeEventListener("scroll",h),t.removeEventListener("wheel",b),t.removeEventListener("touchstart",_),t.removeEventListener("touchend",O),u.p()},v:()=>{const[x,T]=e.h();x&&(a(F(x,n),T,d),d=!1,T&&e.$getViewportSize()>e.$getTotalSize()&&e.$update(1,i()))}}},je=(e,t)=>{let n,i,a;const f=t?"scrollLeft":"scrollTop",g=t?"overflowX":"overflowY",s=async(r,l)=>{if(!n)return void Me(()=>s(r,l));a&&a();const S=()=>{let d;return[new Promise((u,h)=>{d=u,a=h,Ye(e)&&se(h,150)}),e.$subscribe(2,()=>{d&&d()})]};if(l&&Je()){for(;e.$update(8,r()),e.$();){const[d,u]=S();try{await d}catch{return}finally{u()}}n.scrollTo({[t?"left":"top"]:F(r(),t),behavior:"smooth"})}else for(;;){const[d,u]=S();try{n[f]=F(r(),t),e.$update(7),await d}catch{return}finally{u()}}};return{$observe(r){n=r,i=He(e,r,t,()=>F(r[f],t),(l,S,d)=>{if(d){const u=r.style,h=u[g];u[g]="hidden",se(()=>{u[g]=h})}S?(r[f]=e.$getScrollOffset()+l,a&&a()):r[f]+=l})},$dispose(){i&&i.m()},$scrollTo(r){s(()=>r)},$scrollBy(r){r+=e.$getScrollOffset(),s(()=>r)},$scrollToIndex(r,{align:l,smooth:S,offset:d=0}={}){if(r=ye(r,0,e.$getItemsLength()-1),l==="nearest"){const u=e.$getItemOffset(r),h=e.$getScrollOffset();if(u<h)l="start";else{if(!(u+e.$getItemSize(r)>h+e.$getViewportSize()))return;l="end"}}s(()=>d+e.$getStartSpacerSize()+e.$getItemOffset(r)+(l==="end"?e.$getItemSize(r)-e.$getViewportSize():l==="center"?(e.$getItemSize(r)-e.$getViewportSize())/2:0),S)},$fixScrollJump:()=>{i&&i.v()}}},Fe=e=>{let t;return{S(n){(t||(t=new(Ce(qe(n))).ResizeObserver(e))).observe(n)},I(n){t.unobserve(n)},m(){t&&t.disconnect()}}},Ne=(e,t)=>{let n;const i=t?"width":"height",a=new WeakMap,f=Fe(g=>{const s=[];for(const{target:r,contentRect:l}of g)if(r.offsetParent)if(r===n)e.$update(4,l[i]);else{const S=a.get(r);S!=D&&s.push([S,l[i]])}s.length&&e.$update(3,s)});return{$observeRoot(g){f.S(n=g)},$observeItem:(g,s)=>(a.set(g,s),f.S(g),()=>{a.delete(g),f.I(g)}),$dispose:f.m}};function Qe(e,t){de(t,!0);let n=K(t,"as",3,"div"),i,a,f;ge(()=>{f!==t.index&&(a&&a(),a=t.resizer(i,f=t.index))}),he(()=>{a&&a()});let g=k(()=>{const l={position:"absolute",[t.horizontal?"height":"width"]:"100%",[t.horizontal?"top":"left"]:"0px",[t.horizontal?xe()?"right":"left":"top"]:t.offset+"px",visibility:t.hide?"hidden":"visible"};return t.horizontal&&(l.display="flex"),Ie(l)});var s=N(),r=Z(s);ve(r,n,!1,(l,S)=>{ze(l,b=>i=b,()=>i);let d;me(()=>d=be(l,d,{style:z(g)}));var u=N(),h=Z(u);Ee(h,()=>t.children,()=>t.item,()=>t.index),Q(S,u)}),Q(e,s),Se()}function rt(e,t){de(t,!0);let n=K(t,"getKey",3,pe),i=K(t,"as",3,"div"),a=K(t,"shift",3,!1),f=K(t,"horizontal",3,!1),g=K(t,"startMargin",3,0);const s=Ae(t.data.length,t.itemSize,t.overscan,void 0,void 0,!t.itemSize),r=Ne(s,f()),l=je(s,f()),S=s.$subscribe(Ue,()=>{le(b,re(s.$getStateVersion()))}),d=s.$subscribe(We,()=>{t.onscroll&&t.onscroll(s.$getScrollOffset())}),u=s.$subscribe(Ge,()=>{t.onscrollend&&t.onscrollend()});let h=ae(void 0),b=ae(re(s.$getStateVersion())),_=k(()=>z(b)&&s.$getRange()),O=k(()=>z(b)&&s.$isScrolling()),x=k(()=>z(b)&&s.$getTotalSize());_e(()=>{const m=y=>{r.$observeRoot(y),l.$observe(y)};t.scrollRef?m(t.scrollRef):m(z(h).parentElement)}),he(()=>{S(),d(),u(),r.$dispose(),l.$dispose()}),ce(()=>{t.data.length!==s.$getItemsLength()&&s.$update(Ke,[t.data.length,a()])}),ce(()=>{g()!==s.$getStartSpacerSize()&&s.$update(De,g())});let T;ge(()=>{T!==z(b)&&(T=z(b),l.$fixScrollJump())});const v=s.$getScrollOffset,U=()=>Xe(s),q=s.$getViewportSize,C=s.$findStartIndex,Y=s.$findEndIndex,W=s.$getItemOffset,A=s.$getItemSize,J=l.$scrollToIndex,G=l.$scrollTo,o=l.$scrollBy;let c=k(()=>Ie({"overflow-anchor":"none",flex:"none",position:"relative",visibility:"hidden",width:f()?z(x)+"px":"100%",height:f()?"100%":z(x)+"px","pointer-events":z(O)?"none":void 0}));var V=N(),L=Z(V);return ve(L,i,!1,(m,y)=>{ze(m,$=>le(h,re($)),()=>z(h));let I;me(()=>I=be(m,I,{style:z(c)}));var w=N(),E=Z(w);$e(E,17,()=>Re(z(_)),$=>n()(t.data[$],$),($,R)=>{const H=k(()=>t.data[z(R)]),X=k(()=>z(b)&&s.$getItemOffset(z(R))),ne=k(()=>z(b)&&s.$isUnmeasuredItem(z(R)));Qe($,{get children(){return t.children},get item(){return z(H)},get index(){return z(R)},get as(){return t.item},get offset(){return z(X)},get hide(){return z(ne)},get horizontal(){return f()},get resizer(){return r.$observeItem}})}),Q(y,w)}),Q(e,V),Se({getScrollOffset:v,getScrollSize:U,getViewportSize:q,findStartIndex:C,findEndIndex:Y,getItemOffset:W,getItemSize:A,scrollToIndex:J,scrollTo:G,scrollBy:o})}export{rt as V};
