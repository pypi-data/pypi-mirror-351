import{e as K}from"../chunks/DNSHY1Ls.js";import{b as B}from"../chunks/Ddm0HaqK.js";import{c as p,a as f,t as O,s as E,h as F}from"../chunks/Ddg5X7gK.js";import{p as w,a as q,f as I,g as a,d as h,c as G,r as H,t as C,n as J}from"../chunks/mF3OkLKa.js";import{s as N,r as Q,i as s}from"../chunks/C8XeOgap.js";import{g as S,s as M,I as W}from"../chunks/UAtXrf73.js";import{A as X}from"../chunks/BEdpKDj6.js";import{A as Y}from"../chunks/Cdk0B86e.js";import{b as Z}from"../chunks/BMdZThlg.js";import{L as $}from"../chunks/ChJsMzFl.js";import{P as tt}from"../chunks/DvvRNQ55.js";import{T as et}from"../chunks/HfRZSccY.js";import{V as rt}from"../chunks/CDmcrrOQ.js";import{T as at}from"../chunks/CibwfuQW.js";const it=async({params:m,parent:t})=>{const{mopidy:r}=await t(),i=m.directory===""?null:B(m.directory),n=r.getDirectory(i);if(!n)throw K(404,"Directory not found");return await r.requestImages(n.children.map(x=>x.uri)),{directory:n}},xt=Object.freeze(Object.defineProperty({__proto__:null,load:it},Symbol.toStringTag,{value:"Module"}));var ot=O('<img class="aspect-square h-full rounded-full object-cover" alt="Album cover">'),st=O('<a class="after:absolute after:inset-0 after:z-10 hover:underline"> </a>');function mt(m,t){w(t,!0);let r=Q(t,["$$slots","$$events","$$legacy","directory"]);const i=S();let n=h(()=>t.directory.uri?i.getImage(t.directory.uri):void 0);$(m,N({containerClass:"relative",lines:1},()=>r,{leading:l=>{var o=p(),u=I(o);{var _=e=>{var b=ot();C(()=>M(b,"src",a(n))),f(e,b)},c=e=>{W(e,{icon:"folder"})};s(u,e=>{a(n)?e(_):e(c,!1)})}f(l,o)},labelText:l=>{var o=st(),u=G(o,!0);H(o),C(_=>{M(o,"href",`${Z??""}/library/${_??""}`),E(u,t.directory.name)},[()=>encodeURIComponent(t.directory.uri)]),f(l,o)},$$slots:{leading:!0,labelText:!0}})),q()}function nt(m,t){w(t,!0);const r=S();var i=p(),n=I(i);{var x=l=>{var o=p();const u=h(()=>r.getDirectory(t.item.uri));var _=I(o);{var c=e=>{mt(e,{get directory(){return a(u)}})};s(_,e=>{a(u)&&e(c)})}f(l,o)},z=(l,o)=>{{var u=c=>{var e=p();const b=h(()=>r.getAlbum(t.item.uri));var P=I(e);{var d=v=>{X(v,{get album(){return a(b)}})};s(P,v=>{a(b)&&v(d)})}f(c,e)},_=(c,e)=>{{var b=d=>{var v=p();const A=h(()=>r.getArtist(t.item.uri));var R=I(v);{var g=y=>{Y(y,{get artist(){return a(A)}})};s(R,y=>{a(A)&&y(g)})}f(d,v)},P=(d,v)=>{{var A=g=>{var y=p();const k=h(()=>r.getTrack(t.item.uri));var T=I(y);{var D=L=>{et(L,{get track(){return a(k)}})};s(T,L=>{a(k)&&L(D)})}f(g,y)},R=(g,y)=>{{var k=T=>{var D=p();const L=h(()=>r.getPlaylist(t.item.uri));var U=I(D);{var V=j=>{tt(j,{get playlist(){return a(L)}})};s(U,j=>{a(L)&&j(V)})}f(T,D)};s(g,T=>{t.item.type==="playlist"&&T(k)},y)}};s(d,g=>{t.item.type==="track"?g(A):g(R,!1)},v)}};s(c,d=>{t.item.type==="artist"?d(b):d(P,!1)},e)}};s(l,c=>{t.item.type==="album"?c(u):c(_,!1)},o)}};s(n,l=>{t.item.type==="directory"?l(x):l(z,!1)})}f(m,i),q()}function lt(m,t){rt(m,{get data(){return t.items},getKey:i=>i.uri,item:(i,n=J)=>{nt(i,{get item(){return n()}})},$$slots:{item:!0}})}function At(m,t){w(t,!0),F(r=>{const i=h(()=>t.data.directory.name??"Library");at(r,{get text(){return a(i)}})}),lt(m,{get items(){return t.data.directory.children}}),q()}export{At as component,xt as universal};
