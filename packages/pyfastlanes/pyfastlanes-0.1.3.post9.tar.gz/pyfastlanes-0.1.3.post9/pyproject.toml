# pyproject.tmol

[build-system]
requires = [
    # Backend and native-code helpers
    "scikit-build-core>=0.11.3,<0.12",
    "cmake>=3.22",
    "ninja; platform_system != 'Windows'",
    # Packaging extras
    "setuptools>=42",
    "wheel",
    "setuptools_scm[toml]>=8,<9",
    # C++/Python bindings
    "pybind11>=2.12,<2.13",
]
build-backend = "scikit_build_core.build"

[project]
name = "pyfastlanes"
version = "0.1.3.post9"
description = "FastLanes File Format"
readme = { file = "README.md", content-type = "text/markdown" }
authors = [{ name = "Azim Afroozeh", email = "azim@cwi.nl" }]
requires-python = ">=3.8"
license = { file = "LICENSE" }
keywords = ["fastlanes", "file-format"]

[tool.setuptools_scm]
write_to = "python/pyfastlanes/_version.py"
version_scheme = "no-guess-dev"

[tool.setuptools.packages.find]
where = ["python"]
include = ["pyfastlanes*"]

[tool.scikit-build]
build-dir = "skbuild-editable"
editable.mode = "redirect"

cmake.args = [
    "-DFLS_BUILD_PYTHON=ON",
    "-DFLS_ENABLE_VERBOSE_OUTPUT=ON"
]

metadata.version.provider = "scikit_build_core.metadata.setuptools_scm"

# Whitelist-based source distribution
sdist.exclude = ["**/*"]
sdist.include = [
    "python/pyfastlanes/**",
    "python/bindings/**",
    "README.md",
    "LICENSE",
    "pyproject.toml",
    "CMakeLists.txt",
    "cmake/**",
    "src/**",
]

[tool.scikit-build.wheel]
license-files = ["LICENSE"]

[tool.cibuildwheel]
test-command = "pytest -q tests"
