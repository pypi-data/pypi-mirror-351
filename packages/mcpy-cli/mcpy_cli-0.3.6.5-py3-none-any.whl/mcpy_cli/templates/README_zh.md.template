# æ¬¢è¿ä½¿ç”¨ {package_name} æœåŠ¡ï¼

*[English Version](README.md)*

æœ¬æœåŠ¡ç”± `{mcp_server_name}`å¼ºåŠ›é©±åŠ¨ï¼Œæ—¨åœ¨ä¸ºæ‚¨æä¾›ä¸€å¥—å·¥å…·ï¼Œä»¥ååŠ©æ‚¨å®Œæˆ **{service_purpose_description}**ã€‚
<!-- æ‰“åŒ…è€…è¯·æ³¨æ„ï¼šè¯·å°† '{service_purpose_description}' æ›¿æ¢ä¸ºå¯¹æœ¬æœåŠ¡ç”¨é€”çš„ç®€æ˜ç”¨æˆ·å‹å¥½æè¿°ã€‚ -->

å®ƒä½¿ç”¨ `mcpy-cli` è¿›è¡Œæ‰“åŒ…ï¼Œä»¥ä¾¿ç›´æ¥ä¸æ¨¡å‹ä¸Šä¸‹æ–‡åè®® (MCP) å·¥å…·è¿›è¡Œäº¤äº’ã€‚

## æœåŠ¡å†…å®¹

æœ¬æœåŠ¡æä¾›ï¼š
- ğŸš€ **å³ç”¨å‹å·¥å…·**ï¼šè·å–å¼ºå¤§çš„åŠŸèƒ½ï¼Œç”¨äº{service_purpose_description_short}ã€‚ <!-- æ‰“åŒ…è€…è¯·æ³¨æ„ï¼šè¯·æ›¿æ¢ä¸ºéå¸¸ç®€çŸ­çš„æè¿°ï¼ˆä¾‹å¦‚â€œå›¾åƒåˆ†æâ€ï¼Œâ€œæ–‡æœ¬ç”Ÿæˆâ€ï¼‰ -->
- ğŸ **ä¾¿æ·çš„ Python é›†æˆ**ï¼šä»æ‚¨çš„ Python è„šæœ¬å¿«é€Ÿè°ƒç”¨å·¥å…·ã€‚
- ğŸ§ª **äº¤äº’å¼æµ‹è¯•**ï¼šç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ¢ç´¢å·¥å…·ã€‚

## å¿«é€Ÿä¸Šæ‰‹ï¼šä½¿ç”¨å·¥å…·

æ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å¼€å§‹ä½¿ç”¨æœ¬æœåŠ¡æä¾›çš„å·¥å…·ï¼š

### 1. ç¯å¢ƒè¦æ±‚ (å®¢æˆ·ç«¯ç¯å¢ƒ)

- **Python 3.7+**ï¼šç¡®ä¿æ‚¨å·²å®‰è£…å…¼å®¹çš„ Python ç‰ˆæœ¬ã€‚
- **`requests` åº“**ï¼šæ‚¨éœ€è¦æ­¤åº“å‘æœåŠ¡å‘å‡º HTTP è¯·æ±‚ã€‚å¦‚æœå°šæœªå®‰è£…ï¼Œè¯·è¿è¡Œï¼š
  ```bash
  pip install requests
  ```

### 2. æœåŠ¡æ¥å…¥ç‚¹

æœåŠ¡åœ°å€ï¼š
- **åŸºç¡€ URL**ï¼š`{service_url_example}`
- **äº¤äº’å¼æµ‹è¯•é¡µé¢**ï¼šåœ¨æµè§ˆå™¨ä¸­è®¿é—® `{service_url_example}/mcp` æŸ¥çœ‹å¯ç”¨å·¥å…·å¹¶è¿›è¡Œäº¤äº’å¼æµ‹è¯•ã€‚

### 3. è°ƒç”¨å·¥å…· (Python ç¤ºä¾‹)

æ‚¨å¯ä»¥ä½¿ç”¨ç®€å•çš„ Python è„šæœ¬è°ƒç”¨ä»»ä½•å·¥å…·ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š

```python
import requests
import json

# --- é…ç½®ä¿¡æ¯ ---
SERVICE_BASE_URL = "{service_url_example}"  # å¦‚æœæœåŠ¡æ‰˜ç®¡åœ¨å…¶ä»–åœ°æ–¹ï¼Œè¯·æ›¿æ¢æ­¤URL
TOOL_NAME = "your_tool_name_here"  # è¯·æ›¿æ¢ä¸ºå®é™…çš„å·¥å…·åç§° (å‚è§â€œå¯ç”¨å·¥å…·â€éƒ¨åˆ†)
PARAMETERS = {
    "param1": "value1",  # è¯·æ›¿æ¢ä¸ºå·¥å…·æ‰€éœ€çš„å®é™…å‚æ•°
    "param2": 123
}

# --- è¾…åŠ©å‡½æ•° ---
def call_mcp_tool(base_url, tool_name, params):
    """è°ƒç”¨ MCP å·¥å…·å¹¶è¿”å› JSON å“åº”"""
    endpoint = f"{base_url}/mcp"
    payload = {
        "jsonrpc": "2.0",
        "method": tool_name,
        "params": params,
        "id": 1  # å¯ä»¥æ˜¯ä»»ä½•å”¯ä¸€ID
    }
    headers = {'Content-Type': 'application/json'}

    print(f"å°è¯•åœ¨ '{endpoint}' è°ƒç”¨å·¥å…· '{tool_name}'ï¼Œå‚æ•°ä¸º: {params}")

    try:
        response = requests.post(endpoint, json=payload, headers=headers, timeout=30) # 30ç§’è¶…æ—¶
        response.raise_for_status()  # é’ˆå¯¹é”™è¯¯çš„å“åº” (4XX æˆ– 5XX) æŠ›å‡º HTTPError
        return response.json()
    except requests.exceptions.HTTPError as http_err:
        print(f"å‘ç”Ÿ HTTP é”™è¯¯: {http_err}")
        print(f"å“åº”å†…å®¹: {response.content}")
    except requests.exceptions.ConnectionError as conn_err:
        print(f"å‘ç”Ÿè¿æ¥é”™è¯¯: {conn_err}")
    except requests.exceptions.Timeout as timeout_err:
        print(f"å‘ç”Ÿè¶…æ—¶é”™è¯¯: {timeout_err}")
    except requests.exceptions.RequestException as req_err:
        print(f"è¯·æ±‚è¿‡ç¨‹ä¸­å‘ç”Ÿæ„å¤–é”™è¯¯: {req_err}")
    except json.JSONDecodeError:
        print(f"è§£æ JSON å“åº”å¤±è´¥ã€‚åŸå§‹å“åº”: {response.text}")
    return None

# --- ä¸»æ‰§è¡Œé€»è¾‘ ---
if __name__ == "__main__":
    print(f"æ­£åœ¨è°ƒç”¨ MCP æœåŠ¡ '{TOOL_NAME}'...")
    result = call_mcp_tool(SERVICE_BASE_URL, TOOL_NAME, PARAMETERS)

    if result:
        print("\n--- æœåŠ¡å“åº” ---")
        if 'result' in result:
            print("è°ƒç”¨æˆåŠŸ!")
            print(json.dumps(result['result'], indent=2, ensure_ascii=False))
        elif 'error' in result:
            print("æœåŠ¡è¿”å›é”™è¯¯:")
            print(json.dumps(result['error'], indent=2, ensure_ascii=False))
        else:
            print("æ„å¤–çš„å“åº”æ ¼å¼:")
            print(json.dumps(result, indent=2, ensure_ascii=False))
    else:
        print("\næœªæ”¶åˆ°å“åº”æˆ–è°ƒç”¨è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ã€‚")

```

**è¯·è®°å¾—ï¼š**
- å°† `your_tool_name_here` æ›¿æ¢ä¸ºæ‚¨æƒ³ä½¿ç”¨çš„å·¥å…·çš„å®é™…åç§°ã€‚
- ä½¿ç”¨è¯¥å·¥å…·æ‰€éœ€çš„æ­£ç¡®è¾“å…¥æ›´æ–° `PARAMETERS` å­—å…¸ã€‚

### (å¯é€‰) ä½¿ç”¨ FastMCP å®¢æˆ·ç«¯

å¦‚æœæ‚¨æ›´å–œæ¬¢å¹¶ä¸”å·²å®‰è£… `fastmcp` åº“ (`pip install fastmcp`)ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶å®¢æˆ·ç«¯ï¼š

```python
# import asyncio
# from fastmcp import FastMCP
#
# async def main():
#     client = FastMCP("{service_url_example}")
#     try:
#         # åˆ—å‡ºå¯ç”¨å·¥å…·
#         # tools = await client.list_tools()
#         # print("å¯ç”¨å·¥å…·:", tools)
#
#         # è°ƒç”¨ç‰¹å®šå·¥å…·
#         # result = await client.call_tool("your_tool_name_here", {"param1": "value1"})
#         # print("å·¥å…·ç»“æœ:", result)
#     except Exception as e:
#         print(f"å‘ç”Ÿé”™è¯¯: {e}")
#     finally:
#         await client.close()
#
# if __name__ == "__main__":
#     asyncio.run(main())
```

## å¯ç”¨å·¥å…·

ä»¥ä¸‹æ˜¯æœ¬æœåŠ¡ä¸­å¯ç”¨çš„å·¥å…·åˆ—è¡¨ã€‚æ­¤éƒ¨åˆ†æ˜¯æ ¹æ®æ‰“åŒ…çš„ Python å‡½æ•°è‡ªåŠ¨ç”Ÿæˆçš„ã€‚

{tool_documentation_section}

## åŸºæœ¬æ•…éšœæ’é™¤ (å®¢æˆ·ç«¯)

å¦‚æœæ‚¨åœ¨å°è¯•è°ƒç”¨å·¥å…·æ—¶é‡åˆ°é—®é¢˜ï¼š

1.  **æ£€æŸ¥æœåŠ¡ URL**ï¼šç¡®ä¿æ‚¨è„šæœ¬ä¸­çš„ `SERVICE_BASE_URL` ä¸æä¾›çš„ä¸€è‡´ (`{service_url_example}`)ã€‚
2.  **éªŒè¯å·¥å…·åç§°**ï¼šå¯¹ç…§â€œå¯ç”¨å·¥å…·â€åˆ—è¡¨ä»”ç»†æ£€æŸ¥å·¥å…·åç§°ã€‚åç§°åŒºåˆ†å¤§å°å†™ã€‚
3.  **æ£€æŸ¥å‚æ•°**ï¼šç¡®ä¿æ‚¨å‘é€çš„å‚æ•°ä¸å·¥å…·æœŸæœ›çš„ç­¾åï¼ˆåç§°ã€ç±»å‹å’Œå‚æ•°æ•°é‡ï¼‰åŒ¹é…ã€‚
4.  **ç½‘ç»œè¿æ¥**ï¼šç¡®è®¤æ‚¨å¯ä»¥ä»å®¢æˆ·ç«¯è®¡ç®—æœºè®¿é—®æœåŠ¡æ¥å…¥ç‚¹ã€‚
5.  **æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿— (å¦‚æœå¯è®¿é—®)**ï¼šå¦‚æœæ‚¨å¯ä»¥è®¿é—®è¿è¡Œæ­¤æœåŠ¡çš„æœåŠ¡å™¨æ—¥å¿—ï¼Œå®ƒä»¬å¯èƒ½ä¼šæä¾›æœ‰å…³é”™è¯¯çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚
6.  **äº¤äº’å¼æµ‹è¯•é¡µé¢**ï¼šä½¿ç”¨ `{service_url_example}/mcp` é¡µé¢ç›´æ¥æµ‹è¯•å·¥å…·ã€‚è¿™æœ‰åŠ©äºåˆ¤æ–­é—®é¢˜æ˜¯å‡ºåœ¨æ‚¨çš„å®¢æˆ·ç«¯ä»£ç è¿˜æ˜¯å·¥å…·æœ¬èº«ã€‚

## æ”¯æŒ

-   æœ‰å…³æ­¤ `{package_name}` æœåŠ¡ä¸­**å·¥å…·åŠŸèƒ½**çš„é—®é¢˜æˆ–ç–‘é—®ï¼Œè¯·è”ç³»å‘æ‚¨æä¾›æ­¤æœåŠ¡çš„äººå‘˜æˆ–å›¢é˜Ÿã€‚
-   å¦‚æœæ‚¨æ€€ç–‘ `mcpy-cli` **æ‰“åŒ…å·¥å…·æœ¬èº«**å­˜åœ¨é—®é¢˜ï¼Œæ‚¨å¯ä»¥åœ¨ [mcpy-cli GitHub ä»“åº“](https://github.com/liuhaotian9420/mcp) æ‰¾åˆ°æ›´å¤šä¿¡æ¯æˆ–æŠ¥å‘Šé—®é¢˜ã€‚

---

ğŸ‰ ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼