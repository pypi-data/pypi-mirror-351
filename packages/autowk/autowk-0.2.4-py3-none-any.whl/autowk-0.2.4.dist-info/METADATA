Metadata-Version: 2.1
Name: autowk
Version: 0.2.4
Summary: åŸºäºWebKitçš„Pythonè‡ªåŠ¨åŒ–æµè§ˆå™¨æ¡†æ¶
Home-page: https://github.com/LoseNine/AutoWK
Author: ruyi
Author-email: losenine@163.com
Classifier: Programming Language :: Python :: 3
Classifier: License :: OSI Approved :: BSD License
Classifier: Operating System :: Microsoft :: Windows
Requires-Python: >=3.7
Description-Content-Type: text/markdown
Requires-Dist: psutil>=5.9.0

## AutoWK è‡ªåŠ¨åŒ–æµè§ˆå™¨æ¡†æ¶
> ğŸš€ ä¸€ä¸ªåŸºäºåŸç”Ÿ WebKitäºŒæ¬¡å¼€å‘çš„è‡ªåŠ¨åŒ–æµè§ˆå™¨æ¡†æ¶ï¼Œæ”¯æŒå‘½ä»¤è¡Œå‚æ•°æ§åˆ¶çª—å£ä½ç½®ä¸ä»£ç†é…ç½®ï¼Œå¹¶é€šè¿‡ Python å®¢æˆ·ç«¯é©±åŠ¨è‡ªåŠ¨æ“ä½œæµè§ˆå™¨ã€‚
<p align="center">
  <img src="icon.png" alt="AutoWK Logo" width="230">
</p>

## âœ¨ é¡¹ç›®äº®ç‚¹

- âœ… ğŸ§  åŸºäº WebKit æºç æ„å»ºï¼Œå°è€Œç²¾è‡´çš„æµè§ˆå™¨å†…æ ¸
- âœ… ğŸ› ï¸ è‡ªåŠ¨å¯åŠ¨ WebKit ä¸ WebDriver è¿›ç¨‹
- âœ… ğŸ“œ æ”¯æŒå‘½ä»¤è¡Œä¼ å‚ï¼ˆçª—å£ä½ç½®ã€å°ºå¯¸ã€ä»£ç†ç±»å‹ã€ä»£ç†è®¤è¯ï¼‰
- âœ… ğŸ’ª ç½‘ç»œæ”¹é€ ï¼Œæ”¯æŒ HTTP/SOCKS5 ç­‰ä»£ç†æ¨¡å¼
- âœ… ğŸ“ Python API è°ƒç”¨æ§åˆ¶æµè§ˆå™¨è¡Œä¸º
- âœ… ğŸ§ª äººç±»è¡Œä¸ºæ¨¡æ‹Ÿï¼Œåº•å±‚è¡Œä¸ºé‡å†™ï¼Œè‡ªå®šä¹‰è¡Œä¸ºåŠ¨ä½œéƒ½æ˜¯isTrustedã€‚
---


## å¿«é€Ÿå¼€å§‹
> ğŸš€ äº¤æµç¾¤QQï¼š391116392
1. å®‰è£…ä¾èµ–ï¼š

   ```bash
   pip install autowk
   ```

2. ç¼–å†™ä»£ç ï¼Œå¯åŠ¨è‡ªåŠ¨åŒ–ï¼š

### ç¤ºä¾‹ä»£ç  ï¼šè¿‡steamçš„å®šåˆ¶5sç›¾
```python
from autowk.AutoWkDriverClient import AutoWK
import time

if __name__ == "__main__":
    client = AutoWK()
    try:
        client.create_session()

        print("[STATUS]", client.status())

        client.set_timeouts({"pageLoad": 10000})
        print("[GET TIMEOUTS]", client.get_timeouts())
        
        client.navigate(r"https://steamdb.info/")
        print("[URL]", client.get_current_url())

        time.sleep(10)
        #åæ ‡ç›´æ¥ç”¨æ“ä½œç³»ç»Ÿçš„æˆªå›¾ï¼Œç„¶åç”»æ¿æ‰“å¼€çœ‹xå’Œyåæ ‡
        client.click_pos_by_win(266,326)
        print('æ‹–æ‹½å®Œæ¯•')


    except Exception as e:
        print(e)

    finally:
        time.sleep(500)
        client.delete_session()
        client.close()
```
### ç¤ºä¾‹ä»£ç  ï¼šè¿‡12306æ»‘å—éªŒè¯ç 
```python
from autowk.AutoWkDriverClient import AutoWK
import time

if __name__ == "__main__":
    """è‡ªåŠ¨åŒ–1236æ»‘å—éªŒè¯ç """
    client = AutoWK()
    try:
        client.create_session()

        print("[STATUS]", client.status())

        client.set_timeouts({"pageLoad": 10000})
        print("[GET TIMEOUTS]", client.get_timeouts())

        client.navigate(r"https://www.12306.cn/index/view/infos/ticket_check.html")
        print("[URL]", client.get_current_url())

        #è¾“å…¥åº§æ¬¡
        input_ele=client.find_element_by_css_selector("input#ticket_check_trainNum").input("1462")

        time.sleep(3)
        #é€‰æ‹©åœ°ç‚¹
        drap=client.find_element_by_css_selector("div.model-select-text")
        drap.set_attribute("data-value","TXP")
        print('attr:', drap.get_attribute("data-value"))
        print('é€‰æ‹©å®Œæ¯•')

        time.sleep(3)
        #æ‹–æ‹½æ»‘å—éªŒè¯ç 
        btn=client.find_element_by_css_selector("li a.btn.btn-primary").click()
        time.sleep(5)
        #æ‹–æ‹½æ»‘å—éªŒè¯ç ï¼Œè¿™é‡Œç”¨çš„æ˜¯æ‹–æ‹½æ¨¡æ‹Ÿäººç±»è¡Œä¸ºï¼Œæ‰€ä»¥ç”¨çš„æ˜¯drag_and_drop_pos_humanæ–¹æ³•
        #åæ ‡éœ€è¦è‡ªå·±å®šä½ä¸€ä¸‹
        client.drag_and_drop_pos_human(525,436,848,436)
        print('æ‹–æ‹½å®Œæ¯•')


    except Exception as e:
        print(e)

    finally:
        time.sleep(5)
        client.delete_session()
        client.close()
```
### ç¤ºä¾‹ä»£ç  ï¼šåˆ‡æ¢iframe
```html
<head>
    <title>Test Iframe</title>
</head>
<body>
    <h1>Main Page</h1>
    <iframe id="myFrame" srcdoc='
        <html>
        <body>
            <input type="text" id="innerInput" value="inside iframe"/>
        </body>
        </html>'></iframe>
</body>
```
```python
from autowk.AutoWkDriverClient import AutoWK
import time

if __name__ == "__main__":
    client = AutoWK()
    try:
        client.create_session()
        print("[STATUS]", client.status())

        # è®¾ç½®è¶…æ—¶
        client.set_timeouts({"pageLoad": 10000})
        print("[GET TIMEOUTS]", client.get_timeouts())

        # è®¿é—®æœ¬åœ°æ–‡ä»¶è·¯å¾„
        client.navigate(r"file:///D:\Python\pycode\2025\autowk\test.html")
        print("[URL]", client.get_current_url())
        time.sleep(2)

        # æŸ¥æ‰¾ iframe å…ƒç´ 
        iframe = client.find_element_by_xpath('//iframe[@id="myFrame"]')
        print("[IFRAME]", iframe)

        # åˆ‡æ¢åˆ° iframe
        print(client.switch_to_frame(iframe))

        # æŸ¥æ‰¾ iframe å†…éƒ¨ input
        inner_input = client.find_element_by_xpath('//input[@id="innerInput"]')
        print("[IFRAME INPUT]", inner_input)

        # æ“ä½œå…ƒç´ 
        inner_input.input("Hello from Python WebDriver!")

    except Exception as e:
        print(e)

    finally:
        time.sleep(500)
        client.delete_session()
        client.close()

```
---

## æ”¯æŒçš„å¯åŠ¨å‘½ä»¤è¡Œå‚æ•°ï¼ˆMiniBrowser.exeï¼‰

| å‚æ•°               | ç¤ºä¾‹                            | è¯´æ˜                       |
|--------------------|----------------------------------|--------------------------|
| `--x=`             | `--x=100`                        | è®¾ç½®çª—å£å·¦ä¸Šè§’ X åæ ‡             |
| `--y=`             | `--y=200`                        | è®¾ç½®çª—å£å·¦ä¸Šè§’ Y åæ ‡             |
| `--width=`         | `--width=1280`                   | è®¾ç½®çª—å£å®½åº¦                   |
| `--height=`        | `--height=720`                   | è®¾ç½®çª—å£é«˜åº¦                   |
| `--proxyType=`     | `--proxyType=socks5`             | ä»£ç†ç±»å‹ï¼š`HTTP` / `SOCKS5` ç­‰ |
| `--proxyHost=`     | `--proxyHost=127.0.0.1`          | ä»£ç†æœåŠ¡å™¨åœ°å€                  |
| `--proxyPort=`     | `--proxyPort=1080`               | ä»£ç†ç«¯å£                     |
| `--proxyUsername=` | `--proxyUsername=admin`          | ä»£ç†è®¤è¯ç”¨æˆ·å                  |
| `--proxyPassword=` | `--proxyPassword=123456`         | ä»£ç†è®¤è¯å¯†ç                    |
```cmd
ä¾‹å­:minibrowser.exe --proxyType=SOCKS5  --proxyHost=1.1.1.1  --proxyPort=1000 --proxyUsername=ruyi  --proxyPassword=wifi --x=500 --y=100  --width=500 --height=500 
```
---

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ main.py                  # ç¤ºä¾‹å…¥å£ï¼Œæ¼”ç¤ºè‡ªåŠ¨åŒ–æ“ä½œ
â”œâ”€â”€ AutoWKBase.py            # WebKit ä¸ WebDriver å¯åŠ¨æ§åˆ¶é€»è¾‘
â”œâ”€â”€ AutoWkDriverClient.py    # å°è£… WebDriver API è‡ªåŠ¨åŒ–æ“ä½œç±»
â”œâ”€â”€ Element.py               # å…ƒç´ å°è£…ç±»ï¼Œæ”¯æŒå±æ€§ã€ç‚¹å‡»ã€è¾“å…¥ç­‰æ“ä½œ
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ launch_driver.bat    # å¯åŠ¨ WebKit WebDriver çš„æ‰¹å¤„ç†è„šæœ¬
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ MiniBrowser.exe      # ç¼–è¯‘å¥½çš„ WebKit æµè§ˆå™¨
```


---

## TODO

- âœ… æ”¯æŒä»£ç†è®¤è¯
- â³ æ”¯æŒ Cookie æŒä¹…åŒ–ç®¡ç†
- â³ æ”¯æŒ Shadow DOM å…ƒç´ æŸ¥æ‰¾
- â³ å®Œå–„çª—å£å¤šå¼€ä¸è¿›ç¨‹éš”ç¦»æ§åˆ¶

---
