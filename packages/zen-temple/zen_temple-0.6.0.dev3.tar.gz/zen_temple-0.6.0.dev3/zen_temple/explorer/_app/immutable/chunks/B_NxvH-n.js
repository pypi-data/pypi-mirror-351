import{Q as He,E as et,aF as tt,aG as rt,aq as ze,j as it,aH as nt,aI as st,aJ as at,aK as ot,q as lt,n as ye,al as $e,am as Qe,an as ut,l as ft,p as ct,b as Se,a as Ce,e as ne,g as O,u as Fe,d as ie,s as ke,r as Y,i as me,c as dt}from"./CZBSCAq2.js";import{b as ht,s as Ie}from"./BkjlwMHH.js";import{w as _t,l as pt,d as vt}from"./DqKNatLn.js";import"./CWj6FrbW.js";import{p as ge,i as Je}from"./DU61YhRX.js";import{a as Ee,g as De,r as gt,e as Ne,i as Pe}from"./BZZDM9jF.js";import{t as ve,a as pe,p as mt}from"./BI1irte-.js";import{o as yt}from"./BofKhbez.js";import{s as Ye}from"./BpLo00Ze.js";import{s as Me}from"./DtRK3t_J.js";const bt=()=>performance.now(),he={tick:i=>requestAnimationFrame(i),now:()=>bt(),tasks:new Set};function Ve(){const i=he.now();he.tasks.forEach(n=>{n.c(i)||(he.tasks.delete(n),n.f())}),he.tasks.size!==0&&he.tick(Ve)}function wt(i){let n;return he.tasks.size===0&&he.tick(Ve),{promise:new Promise(l=>{he.tasks.add(n={c:i,f:l})}),abort(){he.tasks.delete(n)}}}function Le(i,n){_t(()=>{i.dispatchEvent(new CustomEvent(n))})}function kt(i){if(i==="float")return"cssFloat";if(i==="offset")return"cssOffset";if(i.startsWith("--"))return i;const n=i.split("-");return n.length===1?n[0]:n[0]+n.slice(1).map(l=>l[0].toUpperCase()+l.slice(1)).join("")}function Ge(i){const n={},l=i.split(";");for(const s of l){const[c,w]=s.split(":");if(!c||w===void 0)break;const h=kt(c.trim());n[h]=w.trim()}return n}const Et=i=>i;function er(i,n,l,s){var c=(i&st)!==0,w=(i&at)!==0,h=c&&w,p=(i&nt)!==0,L=h?"both":c?"in":"out",a,d=n.inert,v=n.style.overflow,g,b;function K(){var B=ut,oe=He;$e(null),Qe(null);try{return a??(a=l()(n,(s==null?void 0:s())??{},{direction:L}))}finally{$e(B),Qe(oe)}}var I={is_global:p,in(){var B;if(n.inert=d,!c){b==null||b.abort(),(B=b==null?void 0:b.reset)==null||B.call(b);return}w||g==null||g.abort(),Le(n,"introstart"),g=qe(n,K(),b,1,()=>{Le(n,"introend"),g==null||g.abort(),g=a=void 0,n.style.overflow=v})},out(B){if(!w){B==null||B(),a=void 0;return}n.inert=!0,Le(n,"outrostart"),b=qe(n,K(),g,0,()=>{Le(n,"outroend"),B==null||B()})},stop:()=>{g==null||g.abort(),b==null||b.abort()}},N=He;if((N.transitions??(N.transitions=[])).push(I),c&&ht){var ee=p;if(!ee){for(var G=N.parent;G&&(G.f&et)!==0;)for(;(G=G.parent)&&(G.f&tt)===0;);ee=!G||(G.f&rt)!==0}ee&&ze(()=>{it(()=>I.in())})}}function qe(i,n,l,s,c){var w=s===1;if(ot(n)){var h,p=!1;return lt(()=>{if(!p){var N=n({direction:w?"in":"out"});h=qe(i,N,l,s,c)}}),{abort:()=>{p=!0,h==null||h.abort()},deactivate:()=>h.deactivate(),reset:()=>h.reset(),t:()=>h.t()}}if(l==null||l.deactivate(),!(n!=null&&n.duration))return c(),{abort:ye,deactivate:ye,reset:ye,t:()=>s};const{delay:L=0,css:a,tick:d,easing:v=Et}=n;var g=[];if(w&&l===void 0&&(d&&d(0,1),a)){var b=Ge(a(0,1));g.push(b,b)}var K=()=>1-s,I=i.animate(g,{duration:L});return I.onfinish=()=>{var N=(l==null?void 0:l.t())??1-s;l==null||l.abort();var ee=s-N,G=n.duration*Math.abs(ee),B=[];if(G>0){var oe=!1;if(a)for(var se=Math.ceil(G/16.666666666666668),te=0;te<=se;te+=1){var T=N+ee*v(te/se),e=Ge(a(T,1-T));B.push(e),oe||(oe=e.overflow==="hidden")}oe&&(i.style.overflow="hidden"),K=()=>{var t=I.currentTime;return N+ee*v(t/G)},d&&wt(()=>{if(I.playState!=="running")return!1;var t=K();return d(t,1-t),!0})}I=i.animate(B,{duration:G,fill:"forwards"}),I.onfinish=()=>{K=()=>s,d==null||d(s,1-s),c()}},{abort:()=>{I&&(I.cancel(),I.effect=null,I.onfinish=ye)},deactivate:()=>{c=ye},reset:()=>{s===0&&(d==null||d(1,0))},t:()=>K()}}function Xe(i,n,l){if(i.multiple)return Ot(i,n);for(var s of i.options){var c=xe(s);if(ft(c,n)){s.selected=!0;return}}(!l||n!==void 0)&&(i.selectedIndex=-1)}function Rt(i,n){ze(()=>{var l=new MutationObserver(()=>{var s=i.__value;Xe(i,s)});return l.observe(i,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{l.disconnect()}})}function Ue(i,n,l=n){var s=!0;pt(i,"change",c=>{var w=c?"[selected]":":checked",h;if(i.multiple)h=[].map.call(i.querySelectorAll(w),xe);else{var p=i.querySelector(w)??i.querySelector("option:not([disabled])");h=p&&xe(p)}l(h)}),ze(()=>{var c=n();if(Xe(i,c,s),s&&c===void 0){var w=i.querySelector(":checked");w!==null&&(c=xe(w),l(c))}i.__value=c,s=!1}),Rt(i)}function Ot(i,n){for(var l of i.options)l.selected=~n.indexOf(xe(l))}function xe(i){return"__value"in i?i.__value:i.value}function St(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Te={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var Ct=Te.exports,Ze;function xt(){return Ze||(Ze=1,function(i,n){((l,s)=>{i.exports=s()})(Ct,function l(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},c,w=!s.document&&!!s.postMessage,h=s.IS_PAPA_WORKER||!1,p={},L=0,a={};function d(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var r=se(t);r.chunkSize=parseInt(r.chunkSize),t.step||t.chunk||(r.chunkSize=null),this._handle=new I(r),(this._handle.streamer=this)._config=r}).call(this,e),this.parseChunk=function(t,r){var u=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<u){let _=this._config.newline;_||(o=this._config.quoteChar||'"',_=this._handle.guessLineEndings(t,o)),t=[...t.split(_).slice(u)].join(_)}this.isFirstChunk&&T(this._config.beforeFirstChunk)&&(o=this._config.beforeFirstChunk(t))!==void 0&&(t=o),this.isFirstChunk=!1,this._halted=!1;var u=this._partialLine+t,o=(this._partialLine="",this._handle.parse(u,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=o.meta.cursor,u=(this._finished||(this._partialLine=u.substring(t-this._baseIndex),this._baseIndex=t),o&&o.data&&(this._rowCount+=o.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),h)s.postMessage({results:o,workerId:a.WORKER_ID,finished:u});else if(T(this._config.chunk)&&!r){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=o=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!u||!T(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),u||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(t){T(this._config.error)?this._config.error(t):h&&this._config.error&&s.postMessage({workerId:a.WORKER_ID,error:t,finished:!1})}}function v(e){var t;(e=e||{}).chunkSize||(e.chunkSize=a.RemoteChunkSize),d.call(this,e),this._nextChunk=w?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),w||(t.onload=te(this._chunkLoaded,this),t.onerror=te(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!w),this._config.downloadRequestHeaders){var r,u=this._config.downloadRequestHeaders;for(r in u)t.setRequestHeader(r,u[r])}var o;this._config.chunkSize&&(o=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+o));try{t.send(this._config.downloadRequestBody)}catch(_){this._chunkError(_.message)}w&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(r){r=t.statusText||r,this._sendError(new Error(r))}}function g(e){(e=e||{}).chunkSize||(e.chunkSize=a.LocalChunkSize),d.call(this,e);var t,r,u=typeof FileReader<"u";this.stream=function(o){this._input=o,r=o.slice||o.webkitSlice||o.mozSlice,u?((t=new FileReader).onload=te(this._chunkLoaded,this),t.onerror=te(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var o=this._input,_=(this._config.chunkSize&&(_=Math.min(this._start+this._config.chunkSize,this._input.size),o=r.call(o,this._start,_)),t.readAsText(o,this._config.encoding));u||this._chunkLoaded({target:{result:_}})},this._chunkLoaded=function(o){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(o.target.result)},this._chunkError=function(){this._sendError(t.error)}}function b(e){var t;d.call(this,e=e||{}),this.stream=function(r){return t=r,this._nextChunk()},this._nextChunk=function(){var r,u;if(!this._finished)return r=this._config.chunkSize,t=r?(u=t.substring(0,r),t.substring(r)):(u=t,""),this._finished=!t,this.parseChunk(u)}}function K(e){d.call(this,e=e||{});var t=[],r=!0,u=!1;this.pause=function(){d.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){d.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(o){this._input=o,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){u&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=te(function(o){try{t.push(typeof o=="string"?o:o.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(_){this._streamError(_)}},this),this._streamError=te(function(o){this._streamCleanUp(),this._sendError(o)},this),this._streamEnd=te(function(){this._streamCleanUp(),u=!0,this._streamData("")},this),this._streamCleanUp=te(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function I(e){var t,r,u,o,_=Math.pow(2,53),j=-_,P=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,k=this,U=0,m=0,V=!1,E=!1,S=[],f={data:[],errors:[],meta:{}};function H(C){return e.skipEmptyLines==="greedy"?C.join("").trim()==="":C.length===1&&C[0].length===0}function W(){if(f&&u&&(ae("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),u=!1),e.skipEmptyLines&&(f.data=f.data.filter(function(y){return!H(y)})),Z()){let y=function(z,$){T(e.transformHeader)&&(z=e.transformHeader(z,$)),S.push(z)};if(f)if(Array.isArray(f.data[0])){for(var C=0;Z()&&C<f.data.length;C++)f.data[C].forEach(y);f.data.splice(0,1)}else f.data.forEach(y)}function A(y,z){for(var $=e.header?{}:[],F=0;F<y.length;F++){var D=F,x=y[F],x=((le,R)=>(M=>(e.dynamicTypingFunction&&e.dynamicTyping[M]===void 0&&(e.dynamicTyping[M]=e.dynamicTypingFunction(M)),(e.dynamicTyping[M]||e.dynamicTyping)===!0))(le)?R==="true"||R==="TRUE"||R!=="false"&&R!=="FALSE"&&((M=>{if(P.test(M)&&(M=parseFloat(M),j<M&&M<_))return 1})(R)?parseFloat(R):Q.test(R)?new Date(R):R===""?null:R):R)(D=e.header?F>=S.length?"__parsed_extra":S[F]:D,x=e.transform?e.transform(x,D):x);D==="__parsed_extra"?($[D]=$[D]||[],$[D].push(x)):$[D]=x}return e.header&&(F>S.length?ae("FieldMismatch","TooManyFields","Too many fields: expected "+S.length+" fields but parsed "+F,m+z):F<S.length&&ae("FieldMismatch","TooFewFields","Too few fields: expected "+S.length+" fields but parsed "+F,m+z)),$}var q;f&&(e.header||e.dynamicTyping||e.transform)&&(q=1,!f.data.length||Array.isArray(f.data[0])?(f.data=f.data.map(A),q=f.data.length):f.data=A(f.data,0),e.header&&f.meta&&(f.meta.fields=S),m+=q)}function Z(){return e.header&&S.length===0}function ae(C,A,q,y){C={type:C,code:A,message:q},y!==void 0&&(C.row=y),f.errors.push(C)}T(e.step)&&(o=e.step,e.step=function(C){f=C,Z()?W():(W(),f.data.length!==0&&(U+=C.data.length,e.preview&&U>e.preview?r.abort():(f.data=f.data[0],o(f,k))))}),this.parse=function(C,A,q){var y=e.quoteChar||'"',y=(e.newline||(e.newline=this.guessLineEndings(C,y)),u=!1,e.delimiter?T(e.delimiter)&&(e.delimiter=e.delimiter(C),f.meta.delimiter=e.delimiter):((y=((z,$,F,D,x)=>{var le,R,M,_e;x=x||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var be=0;be<x.length;be++){for(var ue,Re=x[be],X=0,fe=0,J=0,re=(M=void 0,new ee({comments:D,delimiter:Re,newline:$,preview:10}).parse(z)),de=0;de<re.data.length;de++)F&&H(re.data[de])?J++:(ue=re.data[de].length,fe+=ue,M===void 0?M=ue:0<ue&&(X+=Math.abs(ue-M),M=ue));0<re.data.length&&(fe/=re.data.length-J),(R===void 0||X<=R)&&(_e===void 0||_e<fe)&&1.99<fe&&(R=X,le=Re,_e=fe)}return{successful:!!(e.delimiter=le),bestDelimiter:le}})(C,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=y.bestDelimiter:(u=!0,e.delimiter=a.DefaultDelimiter),f.meta.delimiter=e.delimiter),se(e));return e.preview&&e.header&&y.preview++,t=C,r=new ee(y),f=r.parse(t,A,q),W(),V?{meta:{paused:!0}}:f||{meta:{paused:!1}}},this.paused=function(){return V},this.pause=function(){V=!0,r.abort(),t=T(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){k.streamer._halted?(V=!1,k.streamer.parseChunk(t,!0)):setTimeout(k.resume,3)},this.aborted=function(){return E},this.abort=function(){E=!0,r.abort(),f.meta.aborted=!0,T(e.complete)&&e.complete(f),t=""},this.guessLineEndings=function(z,y){z=z.substring(0,1048576);var y=new RegExp(N(y)+"([^]*?)"+N(y),"gm"),q=(z=z.replace(y,"")).split("\r"),y=z.split(`
`),z=1<y.length&&y[0].length<q[0].length;if(q.length===1||z)return`
`;for(var $=0,F=0;F<q.length;F++)q[F][0]===`
`&&$++;return $>=q.length/2?`\r
`:"\r"}}function N(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ee(e){var t=(e=e||{}).delimiter,r=e.newline,u=e.comments,o=e.step,_=e.preview,j=e.fastMode,P=null,Q=!1,k=e.quoteChar==null?'"':e.quoteChar,U=k;if(e.escapeChar!==void 0&&(U=e.escapeChar),(typeof t!="string"||-1<a.BAD_DELIMITERS.indexOf(t))&&(t=","),u===t)throw new Error("Comment character same as delimiter");u===!0?u="#":(typeof u!="string"||-1<a.BAD_DELIMITERS.indexOf(u))&&(u=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var m=0,V=!1;this.parse=function(E,S,f){if(typeof E!="string")throw new Error("Input must be a string");var H=E.length,W=t.length,Z=r.length,ae=u.length,C=T(o),A=[],q=[],y=[],z=m=0;if(!E)return X();if(j||j!==!1&&E.indexOf(k)===-1){for(var $=E.split(r),F=0;F<$.length;F++){if(y=$[F],m+=y.length,F!==$.length-1)m+=r.length;else if(f)return X();if(!u||y.substring(0,ae)!==u){if(C){if(A=[],_e(y.split(t)),fe(),V)return X()}else _e(y.split(t));if(_&&_<=F)return A=A.slice(0,_),X(!0)}}return X()}for(var D=E.indexOf(t,m),x=E.indexOf(r,m),le=new RegExp(N(U)+N(k),"g"),R=E.indexOf(k,m);;)if(E[m]===k)for(R=m,m++;;){if((R=E.indexOf(k,R+1))===-1)return f||q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:A.length,index:m}),ue();if(R===H-1)return ue(E.substring(m,R).replace(le,k));if(k===U&&E[R+1]===U)R++;else if(k===U||R===0||E[R-1]!==U){D!==-1&&D<R+1&&(D=E.indexOf(t,R+1));var M=be((x=x!==-1&&x<R+1?E.indexOf(r,R+1):x)===-1?D:Math.min(D,x));if(E.substr(R+1+M,W)===t){y.push(E.substring(m,R).replace(le,k)),E[m=R+1+M+W]!==k&&(R=E.indexOf(k,m)),D=E.indexOf(t,m),x=E.indexOf(r,m);break}if(M=be(x),E.substring(R+1+M,R+1+M+Z)===r){if(y.push(E.substring(m,R).replace(le,k)),Re(R+1+M+Z),D=E.indexOf(t,m),R=E.indexOf(k,m),C&&(fe(),V))return X();if(_&&A.length>=_)return X(!0);break}q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:A.length,index:m}),R++}}else if(u&&y.length===0&&E.substring(m,m+ae)===u){if(x===-1)return X();m=x+Z,x=E.indexOf(r,m),D=E.indexOf(t,m)}else if(D!==-1&&(D<x||x===-1))y.push(E.substring(m,D)),m=D+W,D=E.indexOf(t,m);else{if(x===-1)break;if(y.push(E.substring(m,x)),Re(x+Z),C&&(fe(),V))return X();if(_&&A.length>=_)return X(!0)}return ue();function _e(J){A.push(J),z=m}function be(J){var re=0;return re=J!==-1&&(J=E.substring(R+1,J))&&J.trim()===""?J.length:re}function ue(J){return f||(J===void 0&&(J=E.substring(m)),y.push(J),m=H,_e(y),C&&fe()),X()}function Re(J){m=J,_e(y),y=[],x=E.indexOf(r,m)}function X(J){if(e.header&&!S&&A.length&&!Q){var re=A[0],de={},je=new Set(re);let Ke=!1;for(let we=0;we<re.length;we++){let ce=re[we];if(de[ce=T(e.transformHeader)?e.transformHeader(ce,we):ce]){let Oe,We=de[ce];for(;Oe=ce+"_"+We,We++,je.has(Oe););je.add(Oe),re[we]=Oe,de[ce]++,Ke=!0,(P=P===null?{}:P)[Oe]=ce}else de[ce]=1,re[we]=ce;je.add(ce)}Ke&&console.warn("Duplicate headers found and renamed."),Q=!0}return{data:A,errors:q,meta:{delimiter:t,linebreak:r,aborted:V,truncated:!!J,cursor:z+(S||0),renamedHeaders:P}}}function fe(){o(X()),A=[],q=[]}},this.abort=function(){V=!0},this.getCharIndex=function(){return m}}function G(e){var t=e.data,r=p[t.workerId],u=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var o={abort:function(){u=!0,B(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:oe,resume:oe};if(T(r.userStep)){for(var _=0;_<t.results.data.length&&(r.userStep({data:t.results.data[_],errors:t.results.errors,meta:t.results.meta},o),!u);_++);delete t.results}else T(r.userChunk)&&(r.userChunk(t.results,o,t.file),delete t.results)}t.finished&&!u&&B(t.workerId,t.results)}function B(e,t){var r=p[e];T(r.userComplete)&&r.userComplete(t),r.terminate(),delete p[e]}function oe(){throw new Error("Not implemented.")}function se(e){if(typeof e!="object"||e===null)return e;var t,r=Array.isArray(e)?[]:{};for(t in e)r[t]=se(e[t]);return r}function te(e,t){return function(){e.apply(t,arguments)}}function T(e){return typeof e=="function"}return a.parse=function(e,t){var r=(t=t||{}).dynamicTyping||!1;if(T(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=!!T(t.transform)&&t.transform,!t.worker||!a.WORKERS_SUPPORTED)return r=null,a.NODE_STREAM_INPUT,typeof e=="string"?(e=(u=>u.charCodeAt(0)!==65279?u:u.slice(1))(e),r=new(t.download?v:b)(t)):e.readable===!0&&T(e.read)&&T(e.on)?r=new K(t):(s.File&&e instanceof File||e instanceof Object)&&(r=new g(t)),r.stream(e);(r=(()=>{var u;return!!a.WORKERS_SUPPORTED&&(u=(()=>{var o=s.URL||s.webkitURL||null,_=l.toString();return a.BLOB_URL||(a.BLOB_URL=o.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",_,")();"],{type:"text/javascript"})))})(),(u=new s.Worker(u)).onmessage=G,u.id=L++,p[u.id]=u)})()).userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=T(t.step),t.chunk=T(t.chunk),t.complete=T(t.complete),t.error=T(t.error),delete t.worker,r.postMessage({input:e,config:t,workerId:r.id})},a.unparse=function(e,t){var r=!1,u=!0,o=",",_=`\r
`,j='"',P=j+j,Q=!1,k=null,U=!1,m=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||a.BAD_DELIMITERS.filter(function(S){return t.delimiter.indexOf(S)!==-1}).length||(o=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(r=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(Q=t.skipEmptyLines),typeof t.newline=="string"&&(_=t.newline),typeof t.quoteChar=="string"&&(j=t.quoteChar),typeof t.header=="boolean"&&(u=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");k=t.columns}t.escapeChar!==void 0&&(P=t.escapeChar+j),t.escapeFormulae instanceof RegExp?U=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(U=/^[=+\-@\t\r].*$/)}})(),new RegExp(N(j),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return V(null,e,Q);if(typeof e[0]=="object")return V(k||Object.keys(e[0]),e,Q)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||k),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),V(e.fields||[],e.data||[],Q);throw new Error("Unable to serialize unrecognized input");function V(S,f,H){var W="",Z=(typeof S=="string"&&(S=JSON.parse(S)),typeof f=="string"&&(f=JSON.parse(f)),Array.isArray(S)&&0<S.length),ae=!Array.isArray(f[0]);if(Z&&u){for(var C=0;C<S.length;C++)0<C&&(W+=o),W+=E(S[C],C);0<f.length&&(W+=_)}for(var A=0;A<f.length;A++){var q=(Z?S:f[A]).length,y=!1,z=Z?Object.keys(f[A]).length===0:f[A].length===0;if(H&&!Z&&(y=H==="greedy"?f[A].join("").trim()==="":f[A].length===1&&f[A][0].length===0),H==="greedy"&&Z){for(var $=[],F=0;F<q;F++){var D=ae?S[F]:F;$.push(f[A][D])}y=$.join("").trim()===""}if(!y){for(var x=0;x<q;x++){0<x&&!z&&(W+=o);var le=Z&&ae?S[x]:x;W+=E(f[A][le],x)}A<f.length-1&&(!H||0<q&&!z)&&(W+=_)}}return W}function E(S,f){var H,W;return S==null?"":S.constructor===Date?JSON.stringify(S).slice(1,25):(W=!1,U&&typeof S=="string"&&U.test(S)&&(S="'"+S,W=!0),H=S.toString().replace(m,P),(W=W||r===!0||typeof r=="function"&&r(S,f)||Array.isArray(r)&&r[f]||((Z,ae)=>{for(var C=0;C<ae.length;C++)if(-1<Z.indexOf(ae[C]))return!0;return!1})(H,a.BAD_DELIMITERS)||-1<H.indexOf(o)||H.charAt(0)===" "||H.charAt(H.length-1)===" ")?j+H+j:H)}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!w&&!!s.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=ee,a.ParserHandle=I,a.NetworkStreamer=v,a.FileStreamer=g,a.StringStreamer=b,a.ReadableStreamStreamer=K,s.jQuery&&((c=s.jQuery).fn.parse=function(e){var t=e.config||{},r=[];return this.each(function(_){if(!(c(this).prop("tagName").toUpperCase()==="INPUT"&&c(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var j=0;j<this.files.length;j++)r.push({file:this.files[j],inputElem:this,instanceConfig:c.extend({},t)})}),u(),this;function u(){if(r.length===0)T(e.complete)&&e.complete();else{var _,j,P,Q,k=r[0];if(T(e.before)){var U=e.before(k.file,k.inputElem);if(typeof U=="object"){if(U.action==="abort")return _="AbortError",j=k.file,P=k.inputElem,Q=U.reason,void(T(e.error)&&e.error({name:_},j,P,Q));if(U.action==="skip")return void o();typeof U.config=="object"&&(k.instanceConfig=c.extend(k.instanceConfig,U.config))}else if(U==="skip")return void o()}var m=k.instanceConfig.complete;k.instanceConfig.complete=function(V){T(m)&&m(V,k.file,k.inputElem),o()},a.parse(k.file,k.instanceConfig)}}function o(){r.splice(0,1),u()}}),h&&(s.onmessage=function(e){e=e.data,a.WORKER_ID===void 0&&e&&(a.WORKER_ID=e.workerId),typeof e.input=="string"?s.postMessage({workerId:a.WORKER_ID,results:a.parse(e.input,e.config),finished:!0}):(s.File&&e.input instanceof File||e.input instanceof Object)&&(e=a.parse(e.input,e.config))&&s.postMessage({workerId:a.WORKER_ID,results:e,finished:!0})}),(v.prototype=Object.create(d.prototype)).constructor=v,(g.prototype=Object.create(d.prototype)).constructor=g,(b.prototype=Object.create(b.prototype)).constructor=b,(K.prototype=Object.create(d.prototype)).constructor=K,a})}(Te)),Te.exports}var Lt=xt();const Ae=St(Lt);async function It(){let i=Ee.PUBLIC_TEMPLE_URL+"solutions/list",n=await fetch(i,{cache:"no-store"});if(!n.ok)return alert("could not fetch "+i),[];let l=await n.json();return l.sort((s,c)=>s.name<c.name?-1:s.name>c.name?1:0),l}async function Tt(i){const n=Ee.PUBLIC_TEMPLE_URL+`solutions/get_detail/${i}`;let l=await fetch(n,{cache:"no-store"});if(!l.ok)throw alert("Could not fetch "+n),new Error("Could not fetch "+n);return await l.json()}async function tr(i,n,l){let s=await(await fetch(Ee.PUBLIC_TEMPLE_URL+`solutions/get_unit/${i}/${n}?scenario=${l}`,{cache:"no-store"})).json();return s!=null&&(s=Ae.parse(s,{delimiter:",",header:!0,newline:`
`})),s}async function rr(i,n,l,s,c,w){const h=Ee.PUBLIC_TEMPLE_URL+`solutions/get_energy_balance/${i}/${n}/${l}?scenario=${s}&year=${c}&rolling_average_size=${w}`;let p=await fetch(h,{cache:"no-store"});if(!p.ok)throw alert("Could not fetch "+h),new Error("Could not fetch "+h);let L=await p.json(),a=["shed_demand","demand","flow_conversion_input","flow_export","flow_import","flow_storage_charge","flow_storage_discharge","flow_transport_in","flow_transport_out","cost_shed_demand","flow_conversion_output"],d={};for(const v of a)L[v]!==void 0&&(d[v]=Be(L[v]));return d}function Be(i,n=0,l=1){if(i.slice(0,i.indexOf(`
`)).split(",").length==2){let p=i.split(`
`),L="",a="";for(const d of p.slice(1,p.length)){if(d=="")continue;let v=d.split(",");L+=v[0]+",",a+=v[1]+","}i=L.substring(0,L.length-1)+`
`+a.substring(0,a.length-1)}i.slice(-1)==`
`&&(i=i.slice(0,-1));function w(p){let[L,...a]=p.split(`
`),d=L.split(",");return d=d.map(v=>isNaN(Number(v))?v:String(Number(v)*l+n)),[d.join(","),...a].join(`
`)}return Ae.parse(w(i),{delimiter:",",header:!0,newline:`
`})}async function ir(i,n,l,s=0,c=1,w=0){const h=Ee.PUBLIC_TEMPLE_URL+`solutions/get_total/${i}/${n}?scenario=${l}&year=${w}`;let p=await fetch(h,{cache:"no-store"});if(!p.ok)throw alert("Error when fetching "+h),new Error("Error when fetching "+h);let L=await p.json(),a=Be(L.data_csv,s,c),d=null;return L.unit!=null&&(L.unit.slice(-1)==`
`&&(L.unit=L.unit.slice(0,L.unit.length-1)),d=Ae.parse(L.unit,{delimiter:",",header:!0,newline:`
`})),a.data=a.data.filter(g=>{for(const b in g){let K=Number(b);if(!Number.isNaN(K)&&!Number.isNaN(g[b])&&Math.abs(g[b])>0)return!0}return!1}),{unit:d,data:a}}async function nr(i,n,l,s=0,c=1){const w=Ee.PUBLIC_TEMPLE_URL+`solutions/get_full_ts/${i}/${n}?scenario=${l}&year=${s}&rolling_average_size=${c}`;let h=await fetch(w,{cache:"no-store"});if(!h.ok)throw alert("Error when fetching "+w),new Error("Error when fetching "+w);let p=await h.json(),L=Be(p.data_csv),a=null;return p.unit!=null&&(p.unit.slice(-1)==`
`&&(p.unit=p.unit.slice(0,p.unit.length-1)),a=Ae.parse(p.unit,{delimiter:",",header:!0,newline:`
`})),{unit:a,data:L}}function At(i,n,l){for(let s of i.data){let c=Object.getOwnPropertyDescriptor(s,n);c!==void 0&&(Object.defineProperty(s,l,c),delete s[n])}}function sr(i,n){let l;for(let s of n)At(s[1],s[0],i),l===void 0?l=structuredClone(s[1]):l.data=l.data.concat(s[1].data);return l}function ar(i,n,l,s=[],c=!1,w="bar",h=""){if(i.length==0)return[];let p=Object.keys(i[0]).filter(v=>!isNaN(Number(v))&&!s.includes(Number(v))),L=Object.keys(n),a={};for(const v of i){let g=!1;for(let I in n)if(!n[I].includes(v[I])){g=!0;break}for(let I of Object.keys(l))if(!l[I].includes(v[I])){g=!0;break}if(g)continue;let b=[];for(let I of L)b.push(v[I]);let K=b.join("_")+h;K in a||(a[K]=Object.fromEntries(p.map(I=>[I,0])));for(let I of p){let N=Number(v[I]);v[I]=="inf"&&(N=1/0),a[K][I]+=N}}if(c){let v=Object.fromEntries(p.map(g=>[g,0]));for(let g of p)for(let b in a)v[g]+=a[b][g];for(let g of p)for(let b in a)v[g]==0?a[b][g]=0:a[b][g]*=1/v[g]}let d=[];for(let v in a)Object.values(a[v]).includes(NaN)||d.push({label:v,data:a[v],type:w});return d}function jt(i){return Array.from(new Set(i))}function Ft(i,n,l,s,c){ne(n,""),ne(l,""),ne(s,null),c()}function Dt(i,n,l){ne(n,""),l()}var Nt=ve("<option> </option>"),Pt=ve("<option> </option>"),Mt=ve('<div class="col-4"><h3>Subsolution</h3> <select class="form-select"></select></div>'),Ut=ve("<option> </option>"),qt=ve('<div class="col-4"><h3>Scenario</h3> <select class="form-select"></select></div>'),zt=ve('<div class="row align-items-end"><div class="col-4"><h3>Solution</h3> <select class="form-select"></select></div> <!> <!></div>');function or(i,n){ct(n,!0);let l=ge(n,"carriers",31,()=>Se([])),s=ge(n,"nodes",31,()=>Se([])),c=ge(n,"edges",31,()=>Se([])),w=ge(n,"years",31,()=>Se([])),h=ge(n,"selected_solution",15),p=ge(n,"loading",15,!1),L=ge(n,"disabled",3,!0),a=Ce(Se([])),d=Ce(null),v=Ce(""),g=Ce(""),b=Ce(""),K=Fe(()=>jt(O(a).map(r=>r.name.split(".")[0]))),I=Fe(()=>O(a).filter(r=>r.name.startsWith(O(v))).map(r=>r.name.split(".")[1]||null).filter(r=>r!=null)),N=Fe(()=>O(I).length==0?O(v)||null:O(g)?O(v)+"."+O(g):null);yt(async function(){var r,u;ne(a,await It(),!0),ne(v,((r=De("solution"))==null?void 0:r.split(".")[0])||"",!0),ne(g,((u=De("solution"))==null?void 0:u.split(".")[1])||"",!0),ne(b,De("scenario")||"",!0),ee()});async function ee(){if(O(N)==null){h(null);return}p(!0),ne(d,await Tt(O(N)),!0),Object.keys(O(d).scenarios).length==1?(ne(b,Object.keys(O(d).scenarios)[0],!0),G()):h(null),p(!1)}function G(){O(d)==null||O(N)==null||(h({solution_name:O(N),scenario_name:O(b),detail:O(d).scenarios[O(b)],components:O(d).components,version:O(d).version}),gt({solution:h().solution_name,scenario:h().scenario_name}),l(h().detail.system.set_carriers.slice()),s(h().detail.system.set_nodes),c(Object.keys(h().detail.edges)),w([...Array(h().detail.system.optimized_years).keys()].map(r=>r*h().detail.system.interval_between_years+h().detail.system.reference_year)),n.solution_selected(h()))}var B=zt(),oe=ie(B),se=ke(ie(oe),2);se.__change=[Ft,g,b,d,ee],Ne(se,21,()=>O(K),Pe,(r,u)=>{var o=Nt(),_={},j=ie(o,!0);Y(o),me(()=>{_!==(_=O(u))&&(o.value=(o.__value=O(u))??""),Ie(j,O(u))}),pe(r,o)}),Y(se),Y(oe);var te=ke(oe,2);{var T=r=>{var u=Mt(),o=ke(ie(u),2);o.__change=[Dt,b,ee],Ne(o,21,()=>O(I),Pe,(_,j)=>{var P=Pt(),Q={},k=ie(P,!0);Y(P),me(()=>{Q!==(Q=O(j))&&(P.value=(P.__value=O(j))??""),Ie(k,O(j))}),pe(_,P)}),Y(o),Y(u),me(()=>o.disabled=L()),Ue(o,()=>O(g),_=>ne(g,_)),pe(r,u)};Je(te,r=>{O(I).length>0&&r(T)})}var e=ke(te,2);{var t=r=>{var u=qt(),o=ke(ie(u),2);o.__change=G,Ne(o,21,()=>Object.keys(O(d).scenarios),Pe,(_,j)=>{var P=Ut(),Q={},k=ie(P,!0);Y(P),me(()=>{Q!==(Q=O(j))&&(P.value=(P.__value=O(j))??""),Ie(k,O(j))}),pe(_,P)}),Y(o),Y(u),me(()=>o.disabled=L()),Ue(o,()=>O(b),_=>ne(b,_)),pe(r,u)};Je(e,r=>{O(d)&&Object.keys(O(d).scenarios).length>1&&r(t)})}Y(B),me(()=>se.disabled=L()),Ue(se,()=>O(v),r=>ne(v,r)),pe(i,B),dt()}vt(["change"]);var Bt=ve('<div class="z-1 position-relative"><div class="accordion" id="accordionFilters"><!></div></div>');function lr(i,n){var l=Bt(),s=ie(l),c=ie(s);Ye(c,()=>n.children??ye),Y(s),Y(l),pe(i,l)}var Kt=ve('<div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button" type="button" data-bs-toggle="collapse" aria-expanded="true"> </button></h2> <div class="accordion-collapse collapse show"><div class="accordion-body"><!></div></div></div>');function ur(i,n){const l=mt();var s=Kt(),c=ie(s),w=ie(c);Me(w,"data-bs-target","#collapse"+l),Me(w,"aria-controls","collapse"+l);var h=ie(w,!0);Y(w),Y(c);var p=ke(c,2);Me(p,"id","collapse"+l);var L=ie(p),a=ie(L);Ye(a,()=>n.children??ye),Y(L),Y(p),Y(s),me(()=>Ie(h,n.title)),pe(i,s)}export{lr as F,or as S,ur as a,tr as b,nr as c,Ue as d,ir as e,ar as f,rr as g,At as h,sr as i,St as j,jt as r,er as t};
